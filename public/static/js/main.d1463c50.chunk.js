(this["webpackJsonpsupertrips-frontend"]=this["webpackJsonpsupertrips-frontend"]||[]).push([[0],{53:function(e,n,t){e.exports=t(87)},58:function(e,n,t){},87:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(16),o=t.n(i),c=t(6),l=(t(58),t(5)),u=t(9),s=t(17),p=t.n(s),d=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),m=function(e){throw e},f=function(e){return d.get("/getUser/".concat(e)).then((function(e){return e.data})).catch(m)},g=function(e){return d.post("/signup",e).then((function(e){return e.data})).catch(m)},h=function(){return d.get("/loggedIn").then((function(e){return e.data}))},x=function(e){return d.post("/login",e).then((function(e){return e.data}))},b=function(){return localStorage.removeItem("loggedInUser"),d.post("/logout",{}).then((function(e){return e.data}))},E=function(e,n){return d.put("/profile/profilePicture",n).then((function(e){return e.data})).catch(m)},v=function(e){return d.put("/toggleAddToFavorites/".concat(e)).then((function(e){return e.data})).catch(m)},I=function(e){return d.post("/auth/facebook",e).then((function(e){return e.data})).catch(m)},O=t(1),w=t(2);function j(){var e=Object(O.a)(["\n  padding-top: 6px;\n\n  @media (max-width: 576px) {\n    width: 125px;\n    margin: 10px 10px 10px 0;\n  }\n\n  @media (min-width: 576px) and (max-width: 767px) {\n    width: 150px;\n    margin: 15px 15px 15px 0;\n  }\n  \n  @media (min-width: 767px) and (max-width: 992px) {\n    width: 175px;\n    margin: 15px 15px 15px 0;\n  }\n\n  @media (min-width: 992px) {\n    width: 200px;\n    margin: 25px 25px 25px 0;\n  }\n\n\n"]);return j=function(){return e},e}function y(){var e=Object(O.a)(["\n  @media (max-width: 767px) {\n    display: ",";\n    flex-direction: column;\n    list-style-type: none;\n    top: 75px;\n    right: 0px;\n    padding-left: 0;\n    width: 200px;\n    position: absolute;\n    z-index: 2;\n    height: fit-content;\n    background-color: rgba(255, 255, 255, 0.8);\n    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n    animation-name: menu-transition;\n    animation-duration: .3s;\n    font-size: 12px;\n\n    li {\n      margin: ",";\n      list-style-type: none;\n      display: flex;\n\n      a {\n        text-decoration: none;\n      }\n    }\n  }\n\n  @media (min-width: 767px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    list-style-type: none;\n    padding: 0;\n    width: 100%;\n\n    li {\n      margin: ",";\n      font-weight: 400;\n\n      a {\n        text-decoration: none;\n      }\n    }\n  }\n\n  @media (min-width: 992px) {\n\n    li {\n      padding-top: 6px;\n\n      a {\n        font-size: 18px;\n      }\n    }\n  }\n"]);return y=function(){return e},e}function S(){var e=Object(O.a)(["\n  @keyframes menu-transition {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  padding: 0;\n  border-bottom: 1px solid lightgrey;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0;\n  margin: 0 40px;\n\n  @media (max-width: 768px) {\n    justify-content: space-between;\n    margin: 0 20px;\n  }\n\n  h3 {\n    padding-bottom: 2px;  \n    \n    a {\n      text-decoration: none;\n    }\n  }\n\n  span {\n    align-self: center;\n\n    &:hover {\n      cursor: pointer;\n    }\n\n    @media (min-width: 767px) {\n      display: none;\n    }\n  }\n"]);return S=function(){return e},e}var U=w.a.div(S()),k=w.a.ul(y(),(function(e){return e.showDropdown}),(function(e){return e.margin||"10px auto"}),(function(e){return e.margin||"auto 10px auto 10px"})),P=w.a.img(j());function T(){var e=Object(O.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  background-color: ",";\n  color: ",";\n  width: ",";\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return T=function(){return e},e}var _=w.a.input(T(),(function(e){return e.theme}),(function(e){return e.color}),(function(e){return e.width}));_.defaultProps={theme:"white",color:"black"};var C=function(e){return a.a.createElement(_,{type:"submit",value:e.formButton,onClick:function(){e.toggleDeleteConfirmation&&e.toggleDeleteConfirmation(),e.closeDeleteConfirmation&&e.closeDeleteConfirmation(),e.deleteItem&&e.deleteItem(),e.toggleProfilePictureForm&&e.toggleProfilePictureForm(),e.logoutUser&&e.logoutUser()},theme:e.theme,color:e.color,width:e.width})},F=t(44),D=t(8),A=t(45),M=function(e){var n;switch(e.chosenIcon){case"faHourglassHalf":n=D.m;break;case"faSuitcaseRolling":n=D.s;break;case"faFeatherAlt":n=D.k;break;case"faPlus":n=D.p;break;case"faAsterisk":n=D.b;break;case"faChevronCircleRight":n=D.f;break;case"faChevronCircleDown":n=D.e;break;case"faTimes":n=D.u;break;case"faBars":n=D.c;break;case"faSpinner":n=D.r;break;case"faChevronRight":n=D.h;break;case"faChevronDown":n=D.g;break;case"faArrowCircleLeft":n=D.a;break;case"faClock":n=D.i;break;case"faCalendarAlt":n=D.d;break;case"faPlusSquare":n=D.q;break;case"faMinusSquare":n=D.n;break;case"faCommentDots":n=D.j;break;case"faHeart":n=D.l;break;case"faTrashAlt":n=D.v;break;case"faPenSquare":n=D.o;break;case"faThumbsUp":n=D.t;break;case"faFacebook":n=A.a;break;default:n=null}return a.a.createElement(F.a,{icon:n,size:e.size,color:e.color,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,onClick:function(){e.toggleDropdown&&e.toggleDropdown(),e.toggleAddToFavorites&&e.toggleAddToFavorites(e.trip._id),e.deleteExperiencePicture&&e.deleteExperiencePicture(e.picture._id),e.toggleLikeTrip&&e.userInSession&&!e.tripDescription&&e.toggleLikeTrip(e.trip._id)}})},L=function(e){var n=Object(r.useState)({loggedInUser:null}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useState)("grey"),f=Object(l.a)(m,2),g=f[0],h=f[1],x=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),E=Object(l.a)(x,2),v=E[0],I=E[1];Object(r.useEffect)((function(){window.addEventListener("resize",(function(){return I({width:window.innerWidth,height:window.innerHeight})})),v.width>=767&&O(),console.log("User In Session :",e.userInSession),o({loggedInUser:e.userInSession})}),[e.userInSession,v.width]);var O=function(){d(!1)},w=function(){h("grey"===g?"black":"grey")};return a.a.createElement(U,null,a.a.createElement(c.b,{to:"/",onClick:O},a.a.createElement(P,{src:"/supertrips_logo_blue.png",alt:"Supertrips"})),a.a.createElement("span",null,a.a.createElement(M,{chosenIcon:p?"faTimes":"faBars",size:"lg",color:g,handleMouseEnter:w,handleMouseLeave:w,toggleDropdown:function(){d(!p)}})),a.a.createElement(k,{showDropdown:p?"flex":"none"},a.a.createElement("li",{style:p?{margin:"30px auto 10px"}:{margin:"auto auto auto 20px"}},a.a.createElement(c.b,{to:"/trips",onClick:O},"TRIPS")),i.loggedInUser?a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/profile",onClick:O},"PROFILE")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/",onClick:O},a.a.createElement(C,{logoutUser:function(){b().then((function(){o({loggedInUser:null}),e.getUser(null)}))},formButton:"LOGOUT"})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/signup",onClick:O},"SIGNUP")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/login",onClick:O},"LOGIN")))))},R=t(7),z=t.n(R),B=t(4),N=t(10);function H(){var e=Object(O.a)(["\n  padding: 12px 20px;\n  border: 1px solid lightgrey;\n  margin: 8px 0 24px;\n  font-size: 17px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  width: 500px;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n\n  @media (min-width: 992px) {\n    width: 700px;\n  }\n"]);return H=function(){return e},e}var Y=w.a.input(H()),G=function(e){return a.a.createElement(Y,{type:"text",placeholder:e.placeholder,onChange:function(n){var t=n.target.value;e.searchUpdates(t)}})},W=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),q=function(e){throw e},J=function(e){return W.post("/newTrip",e).then((function(e){return e.data})).catch(q)},K=function(){return W.get("/trips").then((function(e){return e.data})).catch(q)},V=function(){return W.get("/popularTrips").then((function(e){return e.data})).catch(q)},X=function(e){return W.get("/trips/".concat(e)).then((function(e){return e.data})).catch(q)},Z=function(e,n){return W.put("/trips/".concat(e),n).then((function(e){return e.data})).catch(q)},$=function(e){return W.delete("/trips/".concat(e)).then((function(e){return e.data})).catch(q)},Q=function(e){return W.put("/trip/toggleLikes/".concat(e)).then((function(e){return e.data})).catch(q)};function ee(){var e=Object(O.a)(["\n  padding: 0;\n\n  h2 {\n    text-align: left;\n    padding-left: 40px;\n    margin-bottom: 0;\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(O.a)(["\n  position: relative;\n\n  h2 {\n    color: rgba(255,255,255,.8);\n  }\n\n  h2:first-of-type {\n    position: absolute;\n    left: 5%;\n    top: 2%;\n    font-size: 4vw;\n  }\n\n  h2:nth-of-type(2) {\n    position: absolute;\n    right: 5%;\n    bottom: 2%; \n    font-size: 4vw;\n  }\n\n  video {\n    width: 100%;\n  }\n\n  form {\n    position: absolute;\n    height: 100px;\n    width: 500px;\n    left: 50%;\n    margin-left: -250px;\n    top: 50%;\n    margin-top: -50px;\n\n    @media (max-width: 768px) {\n      width: 300px;\n      margin-left: -150px;\n    }\n\n    @media (min-width: 992px) {\n      width: 700px;\n      margin-left: -350px;\n    }\n  }\n"]);return ne=function(){return e},e}var te=w.a.div(ne()),re=w.a.ul(ee());function ae(){var e=Object(O.a)(["\n  position: relative;\n  text-align: center;\n  \n  a {\n    img {\n      @keyframes slow-popup {\n        0% {\n          opacity: 0;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      height: auto;\n      width: 300px;\n      max-width: 400px;\n      margin-right: 40px;\n      animation: slow-popup 0.5s ease-in-out forwards;\n\n      @media (max-width:768px) {\n        margin-right: 0;\n        height: auto;\n        width: 100%;\n      }\n\n      @media (min-width: 992px) {\n        height: auto;\n        width: 400px;\n        margin-right: 40px;\n      }\n    }\n  }\n\n  svg {\n    position: absolute;\n    bottom: 20px;\n    left: 15px;\n    background-color: rgba(255,255,255,.6);\n    border: 1px solid rgba(0,0,0,0.2);\n    border-radius: 25%;\n    padding: 10px;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return ae=function(){return e},e}function ie(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  ","\n\n  @media (max-width: 767px) {\n    display: flex;\n    flex-direction: column;\n  }\n\n  img {\n    @keyframes slow-popup {\n      0% {\n        opacity: 0;\n      }\n      100% {\n        opacity: 1;\n      }\n    }\n\n    height: auto;\n    width: 300px;\n    max-width: 400px;\n    min-width: 125px;\n    margin-right: 40px;\n    animation: slow-popup 0.5s ease-in-out forwards;\n\n    @media (max-width:768px) {\n      margin-right: 0;\n      height: auto;\n      width: 100%;\n    }\n\n    @media (min-width: 992px) {\n      height: auto;\n      width: 400px;\n      margin-right: 40px;\n    }\n  }\n\n  div {\n    @media (max-width: 767px) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n    }\n\n    a {\n      display: inline-block;\n    }\n\n    h3 {\n      margin-right: 20px;\n      \n      @media (min-width: 992px) {\n        font-size: 26px;\n      }\n    }\n\n    div {\n      @media (max-width: 767px) {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      a {\n        display: inline-block;\n      }\n    }\n  }\n"]);return ie=function(){return e},e}function oe(){var e=Object(O.a)(["\n  margin: 40px;\n  text-align: left;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n\n  @media (max-width: 767px) {\n    justify-content: center;\n  }\n\n  svg {\n    margin: 0 10px 0 0;\n    padding-top: 4px;\n  }\n\n  a {\n    text-decoration: none;\n  }\n"]);return oe=function(){return e},e}function ce(){var e=Object(O.a)(["\n  margin: 0 auto;\n  ","\n"]);return ce=function(){return e},e}function le(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return le=function(){return e},e}var ue=w.a.ul(le()),se=w.a.div(ce(),(function(e){return e.popularTrips&&"display: flex; flex-direction: row; width: 100%; align-items: flex-start; overflow-x: scroll"})),pe=w.a.li(oe()),de=w.a.div(ie(),(function(e){return e.popularTrips&&"display: flex; flex-direction: column; align-items: center;"})),me=w.a.div(ae());function fe(){var e=Object(O.a)(["\n  display: ",";\n  align-self: ",";\n  width: ",";\n  height: ",";\n  margin: ",";\n  background-image: url(",");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n"]);return fe=function(){return e},e}var ge=w.a.div(fe(),(function(e){return e.display||"block"}),(function(e){return e.alignSelf}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.margin}),(function(e){return e.src})),he=function(e){return a.a.createElement(ge,{src:e.src,width:e.width,height:e.height,margin:e.margin,display:e.display})};function xe(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return xe=function(){return e},e}var be=w.a.span(xe()),Ee=function(e){var n={loggedInUser:e.userInSession},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=i[1],u=Object(r.useCallback)((function(){return h().then((function(e){c({loggedInUser:e})})).catch((function(e){return console.log("Error adding/removing to/from favorite trips: ",e)}))}),[]);return a.a.createElement(be,null,a.a.createElement(M,{chosenIcon:"faHeart",color:-1!==o.loggedInUser.favorites.indexOf(e.trip._id)?"red":"grey",toggleAddToFavorites:function(n){v(n).then((function(){u(),e.updateUser()})).catch((function(e){return console.log("An error occurred while adding/removing to/from favorites: ",e)}))},trip:e.trip}))};function ve(){var e=Object(O.a)(["\n  &:hover {\n    ","\n  }\n"]);return ve=function(){return e},e}var Ie=w.a.span(ve(),(function(e){return e.userInSession&&!e.tripDescription?"cursor: pointer":""})),Oe=function(e){return a.a.createElement(Ie,{userInSession:e.userInSession,tripDescription:e.tripDescription},a.a.createElement(M,{tripDescription:e.tripDescription,chosenIcon:"faThumbsUp",color:e.tripDescription?"grey":-1!==e.trip.likes.indexOf(e.userInSession._id)?"royalblue":"grey",toggleLikeTrip:function(n){Q(n).then((function(){e.updateTrips()})).catch((function(e){return console.log("Error adding/removing Like to/from this trip: ",e)}))},trip:e.trip,size:"1x",userInSession:e.userInSession}))},we=function(e){var n=e.trips.map((function(n){return a.a.createElement(pe,{key:n._id},a.a.createElement(de,{popularTrips:e.popularTrips},a.a.createElement(me,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},n.imageUrl&&a.a.createElement("img",{src:n.imageUrl,alt:"trip cover pic"})),e.userInSession&&!e.popularTrips&&a.a.createElement(Oe,{trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips})),a.a.createElement("div",null,a.a.createElement("span",null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},a.a.createElement("h3",null,n.title)),e.userInSession&&!e.popularTrips&&a.a.createElement(Ee,{trip:n,userInSession:e.userInSession,updateUser:e.updateUser})),a.a.createElement("div",null,a.a.createElement(M,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,n.duration," days")),a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement(Oe,{tripDescription:!0,trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips}),a.a.createElement("span",null,n.likes.length)),a.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"20px"}},a.a.createElement(he,{src:n.author.profilePicture,width:"20px",height:"20px",margin:"5px 10px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By ",a.a.createElement(c.b,{to:e.userInSession&&e.userInSession._id===n.author._id?"/profile":"/profile/".concat(n.author._id)},n.author.username))))))}));return a.a.createElement(ue,null,a.a.createElement(se,{popularTrips:e.popularTrips},n))},je=function(e){var n=Object(r.useState)({loggedInUser:e.userInSession}),t=Object(l.a)(n,2),i=t[0],o=t[1],c=Object(r.useState)({search:""}),u=Object(l.a)(c,2),s=u[0],p=u[1],d=Object(r.useState)({trips:[]}),m=Object(l.a)(d,2),f=m[0],g=m[1];Object(r.useEffect)((function(){o({loggedInUser:e.userInSession}),function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t=n,g((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})})),console.log("Popular trips: ",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[e.userInSession]);var h=a.a.createElement(we,{popularTrips:!0,trips:f.trips,userInSession:i.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t=n,g((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})})),console.log("Popular trips: ",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}}),x=function(){var e=Object(N.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p({search:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(te,null,a.a.createElement("h2",null,"Share your experiences..."),a.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0},a.a.createElement("source",{src:"https://res.cloudinary.com/nutriapp/video/upload/v1599923299/jumbotron_video_nz_nkqmp2.mp4",type:"video/mp4"})),a.a.createElement("h2",null,"...and get inspired"),a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.history.push("/search?title=".concat(s.search))}},a.a.createElement(G,{placeholder:"Search for a trip..",searchUpdates:x}),a.a.createElement(C,{formButton:"GO"}))),f.trips&&a.a.createElement(re,null,a.a.createElement("h2",{style:{textAlign:"left"}},"Most Popular trips"),h))},ye=t(23);function Se(){var e=Object(O.a)(["\n  width: 100%;\n  height: 150px;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  resize: none;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return Se=function(){return e},e}function Ue(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return Ue=function(){return e},e}function ke(){var e=Object(O.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 20px;\n  margin: 20px auto;\n  max-width: 350px;\n"]);return ke=function(){return e},e}var Pe=w.a.form(ke()),Te=w.a.input(Ue()),_e=w.a.textarea(Se()),Ce=t(46),Fe=t(47),De=t(52),Ae=t(50),Me=t(25),Le=t.n(Me);function Re(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 8px 20px;\n  border: 1px solid rgba(0,0,0,.1);\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return Re=function(){return e},e}function ze(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return ze=function(){return e},e}var Be=w.a.input(ze()),Ne=w.a.div(Re()),He=function(e){Object(De.a)(t,e);var n=Object(Ae.a)(t);function t(e){var r;return Object(Ce.a)(this,t),(r=n.call(this,e)).handleChange=function(e){r.setState({address:e})},r.handleSelect=function(e){Object(Me.geocodeByAddress)(e).then((function(e){return Object(Me.getLatLng)(e[0])})).then((function(n){r.setState(Object(B.a)({address:e},n)),r.props.setPlace(r.state),console.log("Success",n)})).catch((function(e){return console.error("Error",e)}))},r.state={address:""},r}return Object(Fe.a)(t,[{key:"render",value:function(){return a.a.createElement(Le.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var n=e.getInputProps,t=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Be,n({placeholder:"Search Places ...",className:"location-search-input"})),a.a.createElement("div",{className:"autocomplete-dropdown-container"},i&&a.a.createElement(M,{chosenIcon:"faSpinner",size:"2x"}),t.map((function(e){var n=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return a.a.createElement(Ne,Object.assign({},r(e,{className:n,style:t}),{key:e.index}),a.a.createElement("span",null,e.description))}))))}))}}]),t}(a.a.Component),Ye=t(48);function Ge(){var e=Object(O.a)(["\n  ",";\n\n  @media (max-width: 600px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 576px) and (max-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 992px) {\n    ",";\n    ",";\n  }\n"]);return Ge=function(){return e},e}var We=w.a.div(Ge(),(function(e){return e.formMap&&"box-sizing: border-box; height: 200px; border-radius: 4px;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 300px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 450px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 300px;"}),(function(e){return e.experienceMap&&"width: 600px; height: 250px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 400px;"}),(function(e){return e.experienceMap&&"width: 800px; height: 300px; margin: 0 auto;"})),qe=function(e){var n={name:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng),zoom:e.zoom},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=(i[1],{lat:o.lat,lng:o.lng}),u=parseInt(o.zoom),s=function(e,n,t){var r=function(e,n,t){var r=new n.LatLngBounds;return t.forEach((function(e){r.extend(new n.LatLng(e.lat,e.lng))})),r}(0,n,t);e.fitBounds(r),function(e,n,t){n.event.addDomListenerOnce(e,"idle",(function(){n.event.addDomListener(window,"resize",(function(){e.fitBounds(t)}))}))}(e,n,r)};return a.a.createElement(We,{tripMap:e.tripMap,experienceMap:e.experienceMap,formMap:e.formMap},a.a.createElement(Ye.a,{key:o.name,bootstrapURLKeys:{key:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://supertrips.herokuapp.com",REACT_APP_FACEBOOK_APP_ID:"651873985443420",REACT_APP_GOOGLE_MAPS_KEY:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY"}).GOOGLE_MAPS_KEY)},defaultCenter:c,defaultZoom:u,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(n){var t=n.map,r=n.maps;e.tripMap&&!e.hasOnlyOneLocalisation&&s(t,r,e.allExperiencesCoords),function(n,t){if("tripPresentation"===e.mapType)e.allExperiencesCoords.forEach((function(e){new t.Marker({position:e,map:n})}));else{var r={lat:o.lat,lng:o.lng};new t.Marker({position:r,map:n})}}(t,r)}}))},Je=function(e){var n=Object(r.useState)(e.formState),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){o((function(n){return e.formState}))}),[e.formState]);var c=function(e){var n=e.target,t=n.name,r=n.value,a=n.type,i=n.checked,c=n.files;o("imageUrl"===t||"profilePicture"===t?function(e){return Object(B.a)(Object(B.a)({},e),{},{archive:c[0]})}:function(e){return Object(B.a)(Object(B.a)({},e),{},Object(ye.a)({},t,"checkbox"===a?i:"date"===a?function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(r):"file"===a?c[0]:r))})},u=function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{place:{address:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng)}})}))},s=e.formInputs.map((function(e){return"textarea"===e.type?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(_e,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c})):"place"===e.name?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(He,{setPlace:u}),i.place&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Is this the correct place ?"),a.a.createElement(qe,{formMap:!0,key:i.place.address,address:i.place.address,lat:i.place.lat,lng:i.place.lng,zoom:"14"}))):a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(Te,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c}))}));return a.a.createElement("div",null,a.a.createElement(Pe,{onSubmit:function(n){return function(n,t){n.preventDefault(),e.formSubmit(t)}(n,i)}},a.a.createElement("h3",null,e.formTitle),s,e.auth||"experience photo"===e.formType||a.a.createElement("p",null,"*required"),a.a.createElement(C,{formButton:e.formButton})))};function Ke(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  margin: 50px;\n\n  svg {\n    margin: 0 20px 0 0;\n  }\n\n  @media (max-width: 667px) {\n      flex-direction: column;\n\n      svg {\n        margin: 20px;\n      }\n    }\n"]);return Ke=function(){return e},e}function Ve(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return Ve=function(){return e},e}var Xe=w.a.p(Ve()),Ze=w.a.p(Ke()),$e=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1];return a.a.createElement("div",null,a.a.createElement(Je,{auth:!0,formSubmit:function(n){(e.login?x(n):g(n)).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){console.log("Error while login/signup :",e),o(e.response.data.message)}))},formState:{username:"",password:""},formInputs:[{label:"Username",type:"text",name:"username",placeholder:"Enter your username"},{label:"Password",type:"password",name:"password",placeholder:"*******"}],formButton:e.formButton}),a.a.createElement("p",null,e.authMessage,a.a.createElement(c.b,{to:"".concat(e.formRedirectLink)},e.formRedirectText)),i&&a.a.createElement(Xe,null,i))},Qe=t(24),en=t.n(Qe),nn=function(e){return a.a.createElement("div",null,a.a.createElement($e,Object.assign({},e,{signup:!0,getUser:e.getUser,formButton:"SIGN-UP",authMessage:"Already have an account ?",formRedirectLink:"/login",formRedirectText:" Login"})),a.a.createElement(Ze,null,a.a.createElement(M,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(en.a,{style:{display:"block"},appId:"".concat("651873985443420"),autoLoad:!1,isMobile:!1,reauthenticate:!0,fields:"name,email,picture",callback:function(n){I({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){return console.log(e)}))}})))},tn=function(e){return a.a.createElement("div",null,a.a.createElement($e,Object.assign({},e,{login:!0,getUser:e.getUser,formButton:"LOGIN",authMessage:"Don't have any account yet ?",formRedirectLink:"/signup",formRedirectText:" Sign-up"})),a.a.createElement(Ze,null,a.a.createElement(M,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(en.a,{style:{display:"block"},appId:"".concat("651873985443420"),autoLoad:!1,isMobile:!1,reauthenticate:!0,fields:"name,email,picture",callback:function(n){console.log(n),I({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){return console.log(e)}))}})))};function rn(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return rn=function(){return e},e}function an(){var e=Object(O.a)(["\n  margin: 0 20px;\n"]);return an=function(){return e},e}var on=w.a.div(an()),cn=w.a.span(rn()),ln=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],u=i[1];Object(r.useEffect)((function(){u((function(n){return Object(B.a)(Object(B.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var s=function(){var n=Object(N.a)(z.a.mark((function n(t){var r,a;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:r=n.sent,a=r.filter((function(n){return(n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(t.toUpperCase())})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:a})}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=a.a.createElement(we,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}});return a.a.createElement(on,null,a.a.createElement("h1",null,"Trips"),a.a.createElement(G,{placeholder:"Search for a trip..",searchUpdates:s}),p,o.loggedInUser&&a.a.createElement(cn,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(M,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE"),a.a.createElement("span",null,"TRIP"))))},un=function(e){var n=Object(r.useState)({loggedInUser:null,trips:[]}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=new URLSearchParams(e.location.search).get("title")||"";Object(r.useEffect)((function(){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=t.filter((function(n){return(e.userInSession&&n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(u.toUpperCase())})),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e.userInSession,e.location.search,u]);var s=a.a.createElement(we,{trips:i.trips,userInSession:i.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=t.filter((function(n){return(e.userInSession&&n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(u.toUpperCase())})),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}}),p=i.trips&&i.trips.length;return a.a.createElement("div",null,a.a.createElement("h1",null,'Search results for: "',u,'"'),i.trips&&i.trips.length>0?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,p," trip",p>1&&"s"," found."),a.a.createElement("ul",null,s)):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"0 trip found."),a.a.createElement(c.b,{to:"/trips"},a.a.createElement(C,{formButton:"SEE ALL TRIPS"}))))},sn=t(51),pn=function(e){var n=e.component,t=e.userInSession,r=Object(sn.a)(e,["component","userInSession"]);return a.a.createElement(u.b,Object.assign({},r,{render:function(e){return t?a.a.createElement(n,Object.assign({},e,{userInSession:t},r)):a.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))};function dn(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 20px;\n"]);return dn=function(){return e},e}var mn=w.a.div(dn()),fn=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),gn=function(e){throw e},hn=function(e){return fn.post("/newStep",e).then((function(e){return e.data})).catch(gn)},xn=function(e){return fn.get("/steps/".concat(e)).then((function(e){return e.data})).catch(gn)},bn=function(e){return fn.get("/stepDetails/".concat(e)).then((function(e){return e.data})).catch(gn)},En=function(e,n){return fn.put("/steps/".concat(e),n).then((function(e){return e.data})).catch(gn)},vn=function(e){return fn.delete("/steps/".concat(e)).then((function(e){return e.data})).catch(gn)},In=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),On=function(e){throw e},wn=function(e){return In.post("/newExperience",e).then((function(e){return e.data})).catch(On)},jn=function(e){return In.get("/experiences/".concat(e)).then((function(e){return e.data})).catch(On)},yn=function(e){return In.get("/experiences/trip/".concat(e)).then((function(e){return e.data})).catch(On)},Sn=function(e){return In.get("/experienceDetails/".concat(e)).then((function(e){return e.data})).catch(On)},Un=function(e,n){return In.put("/experiences/".concat(e),n).then((function(e){return e.data})).catch(On)},kn=function(e){return In.delete("/experiences/".concat(e)).then((function(e){return e.data})).catch(On)},Pn=function(e,n){return In.put("/experiences/addPicture/".concat(e),n).then((function(e){return e.data})).catch(On)},Tn=function(e,n){return In.delete("/experiences/".concat(e,"/deletePicture/").concat(n)).then((function(e){return e.data})).catch(On)};function _n(){var e=Object(O.a)(["\n  margin: 40px;\n"]);return _n=function(){return e},e}function Cn(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return Cn=function(){return e},e}function Fn(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return Fn=function(){return e},e}var Dn=w.a.div(Fn()),An=w.a.p(Cn()),Mn=w.a.div(_n()),Ln=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useState)(""),f=Object(l.a)(m,2),g=f[0],x=f[1],b=Object(r.useState)(""),v=Object(l.a)(b,2),I=v[0],O=v[1],w=function(){d(!p)};Object(r.useEffect)((function(){var n=e.match.params;(e.tripForm?X(n.id):e.stepForm?bn(n.stepId):e.experienceForm?Sn(n.experienceId):h()).then((function(n){e.tripForm?o(Object(B.a)(Object(B.a)({},n),{},{imageUrl:"",originalImg:n.imageUrl})):e.profilePictureForm?o({profilePicture:"",originalImg:n.profilePicture}):o(n)})).catch((function(n){return console.log("Error while getting ".concat(e.formType," details :"),n)}))}),[e.formType,e.stepForm,e.tripForm,e.experienceForm,e.profilePictureForm,e.match]);return a.a.createElement(Dn,null,I?a.a.createElement(Mn,null,a.a.createElement(M,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(Je,{formTitle:e.formTitle,formSubmit:function(n){var t=e.match.params;O(!0),console.log("FORM OBJECT",n);var r=new FormData;e.tripForm&&(r.append("title",n.title),n.archive?r.append("imageUrl",n.archive):r.append("imageUrl",n.originalImg),r.append("isPublic",n.isPublic),r.append("startDate",n.startDate),r.append("endDate",n.endDate),console.log("uploadData",r)),e.profilePictureForm&&(n.archive?r.append("profilePicture",n.archive):r.append("profilePicture",n.originalImg),console.log("uploadData",r)),(e.tripForm?Z(t.id,r):e.stepForm?En(t.stepId,n):e.experienceForm?Un(t.experienceId,n):E(e.user._id,r)).then((function(n){console.log("".concat(e.formType," edited!"),n),O(!1),e.profilePictureForm?e.updateProfilePicture():e.history.push({pathname:"/trips/".concat(t.id)})})).catch((function(n){O(!1),console.log("Error while editing ".concat(e.formType,":"),n),x(n.response.data.message)}))},formState:i,formInputs:e.formInputs,formButton:"SAVE"}),a.a.createElement(a.a.Fragment,null,a.a.createElement(C,{toggleDeleteConfirmation:w,formButton:"DELETE",theme:"lightcoral",color:"white"}),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Are you sure you want to delete this ",e.formType," ? "),a.a.createElement(C,{deleteItem:function(){var n=e.match.params,t=e.tripForm?$(n.id):e.stepForm?vn(n.stepId):e.experienceForm?kn(n.experienceId):E(e.user._id,{profilePicture:"https://res.cloudinary.com/nutriapp/image/upload/v1599217287/profileDefault_jr9j16.png"}),r=e.tripForm?"/trips":e.profilePictureForm?"/profile":"/trips/".concat(n.id);t.then((function(n){console.log(n),e.profilePictureForm&&e.updateProfilePicture(),e.history.push(r)})).catch((function(n){console.log("Error while deleting ".concat(e.formType,": "),n)}))},closeDeleteConfirmation:function(){d(!1)},formButton:"YES",theme:"lightcoral",color:"white"}),a.a.createElement(C,{toggleDeleteConfirmation:w,formButton:"CANCEL",theme:"lightgrey",color:"black"})),e.profilePictureForm||a.a.createElement(a.a.Fragment,null,g&&a.a.createElement(An,null,g),a.a.createElement("p",null,a.a.createElement(c.b,{to:"/trips/".concat(e.match.params.id)},a.a.createElement(M,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))))},Rn=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){h().then((function(e){o(e)})).catch((function(e){return console.log("Error while getting user details :",e)}))}),[]);return a.a.createElement(Ln,Object.assign({profilePictureForm:!0,formType:"profile picture",formInputs:[{type:"file",value:"",name:"profilePicture"}],formTitle:"Edit Profile Picture",updateProfilePicture:e.updateProfilePicture,user:i},e))},zn=function(e){var n=Object(r.useState)({loggedInUser:e.userInSession}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useCallback)((function(){return h().then((function(e){d(!1),o({loggedInUser:e})})).catch((function(e){return console.log("Error updating profile picture: ",e)}))}),[]);return a.a.createElement(mn,null,a.a.createElement("h1",null,"Welcome to your profile, ",e.userInSession.username," !"),a.a.createElement(he,{src:i.loggedInUser.profilePicture,width:"150px",height:"150px",margin:"0 auto 20px"}),p&&a.a.createElement(Rn,Object.assign({updateProfilePicture:m},e)),a.a.createElement(C,{formButton:p?"CLOSE":"EDIT PICTURE",toggleProfilePictureForm:function(){d(!p)}}),a.a.createElement(c.b,{to:"/profile/my-trips"},a.a.createElement(C,{formButton:"MY TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/profile/favorite-trips"},a.a.createElement(C,{formButton:"FAVORITE TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"})))};function Bn(){var e=Object(O.a)(["\n  width: 100%;\n  max-width: 600px;\n"]);return Bn=function(){return e},e}function Nn(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 50px auto;\n  }\n"]);return Nn=function(){return e},e}function Hn(){var e=Object(O.a)(["\n  margin: 20px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return Hn=function(){return e},e}function Yn(){var e=Object(O.a)(["\n  margin: 0 auto;\n  width: 100%;\n"]);return Yn=function(){return e},e}function Gn(){var e=Object(O.a)(["\n  margin: 20px auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Gn=function(){return e},e}function Wn(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return Wn=function(){return e},e}function qn(){var e=Object(O.a)(["\n  margin: 20px auto;\n"]);return qn=function(){return e},e}function Jn(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n\n  span {\n    h1 {\n      display: inline-block;\n    }\n\n    svg {\n      margin-left: 20px;\n      padding-bottom: 2px;\n    }\n  }\n"]);return Jn=function(){return e},e}var Kn=w.a.div(Jn()),Vn=w.a.div(qn()),Xn=w.a.p(Wn()),Zn=w.a.ul(Gn()),$n=w.a.div(Yn()),Qn=w.a.li(Hn()),et=w.a.p(Nn()),nt=w.a.img(Bn());function tt(){var e=Object(O.a)(["\n  :hover {\n    color : lightgrey;\n  }\n"]);return tt=function(){return e},e}function rt(){var e=Object(O.a)(["\n  width: 90vw;\n"]);return rt=function(){return e},e}function at(){var e=Object(O.a)(["\n  position: relative;\n  text-align: center;\n\n  img {\n    height: 200px;\n    width: auto;\n    margin: 20px;\n\n    @media (max-width: 767px) {\n      height: 100px;\n      width: auto;\n      margin: 10px;\n    }\n\n    @media (min-width: 992px) {\n      height: 300px;\n      width: auto;\n      margin: 20px;\n    }\n  }\n\n  svg {\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    background-color: rgba(255,255,255,.4);\n    border: 1px solid rgba(0,0,0,0.2);\n    border-radius: 25%;\n    padding: 3px;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return at=function(){return e},e}function it(){var e=Object(O.a)(["\n  text-align: center;\n  margin-top: 20px;\n"]);return it=function(){return e},e}function ot(){var e=Object(O.a)(["\n  display: flex;\n  justify-content: center;\n"]);return ot=function(){return e},e}function ct(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: lightgrey;\n  }\n"]);return ct=function(){return e},e}function lt(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: lightgrey;\n  }\n"]);return lt=function(){return e},e}function ut(){var e=Object(O.a)(["\n  margin: 20px;\n  margin-left: 50px;\n"]);return ut=function(){return e},e}function st(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n  opacity: ",";\n"]);return st=function(){return e},e}function pt(){var e=Object(O.a)(["\n  margin: 10px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return pt=function(){return e},e}function dt(){var e=Object(O.a)(["\n  margin: 0 auto;\n"]);return dt=function(){return e},e}function mt(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return mt=function(){return e},e}function ft(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return ft=function(){return e},e}function gt(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return gt=function(){return e},e}function ht(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n\n  animation: slide-up 0.65s ease-in-out forwards;\n"]);return ht=function(){return e},e}var xt=w.a.div(ht()),bt=w.a.p(gt()),Et=w.a.div(ft()),vt=(w.a.ul(mt()),w.a.div(dt()),w.a.li(pt()),w.a.span(st(),(function(e){return e.opacity}))),It=w.a.p(ut()),Ot=w.a.span(lt()),wt=w.a.span(ct()),jt=w.a.div(ot()),yt=w.a.div(it()),St=w.a.div(at()),Ut=w.a.div(rt()),kt=w.a.span(tt());function Pt(){var e=Object(O.a)(["\n  margin: 40px;\n"]);return Pt=function(){return e},e}function Tt(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return Tt=function(){return e},e}function _t(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return _t=function(){return e},e}var Ct=w.a.div(_t()),Ft=w.a.p(Tt()),Dt=w.a.div(Pt()),At=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(""),s=Object(l.a)(u,2),p=s[0],d=s[1],m="/create-trip"===e.match.path?"/trips":"/trips/".concat(e.match.params.id);return a.a.createElement(Ct,null,p?a.a.createElement(Dt,null,a.a.createElement(M,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(Je,{formType:e.formType,formTitle:e.addPhotoToExperience||"Create a new ".concat(e.formType),formSubmit:function(n){d(!0);var t=new FormData;e.tripForm&&(t.append("title",n.title),t.append("imageUrl",n.archive),t.append("isPublic",n.isPublic),t.append("startDate",n.startDate),t.append("endDate",n.endDate),console.log("uploadData",t)),e.addPhotoToExperience&&t.append("imageUrl",n.archive),(e.tripForm?J(t):e.stepForm?hn(n):e.experienceForm?wn(n):Pn(e.experienceId,t)).then((function(n){d(!1),console.log("New ".concat(e.formType," created !"),n),e.addPhotoToExperience&&e.closeShowAddPhoto(),e.addPhotoToExperience&&e.updateNewPicture(),e.tripForm?e.history.push("/trips"):e.history.push("/trips/".concat(e.tripId))})).catch((function(n){d(!1),console.log("Error while getting ".concat(e.formType," details :"),n),o(n.response.data.message)}))},formState:e.initialState,formInputs:e.formInputs,formButton:e.addPhotoToExperience?"ADD":"CREATE"}),i&&a.a.createElement(Ft,null,i),e.addPhotoToExperience||a.a.createElement("p",null,a.a.createElement(c.b,{to:"".concat(m)},a.a.createElement(M,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))},Mt=function(e){return a.a.createElement(At,Object.assign({addPhotoToExperience:!0,formType:"experience photo",formInputs:[{label:"New photo",type:"file",name:"imageUrl"}],initialState:{imageUrl:"",archive:null},tripId:e.match.params.id,experienceId:e.experienceId,closeShowAddPhoto:e.closeShowAddPhoto,handleUpdateNewPicture:e.updateNewPicture},e))},Lt=function(e){var n=Object(r.useState)({loggedInUser:null,experience:[],expanded:!1,showAddPhoto:!1,editingPhotos:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{editingPhotos:!1})}))},s=function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{showAddPhoto:!1})}))},p=Object(r.useCallback)((function(){return Sn(i.experience._id).then((function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{experience:e})}))})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[i.experience._id]),d=function(e){console.log("Picture with imageId ",e," will be deleted"),Tn(i.experience._id,e).then((function(e){console.log("Picture deleted !",e),p()}))},m=i.experience.pictures&&i.experience.pictures.map((function(n,t){return a.a.createElement(St,{key:t,style:{display:"inline-block"}},a.a.createElement("img",{key:n._id,src:n.url,alt:"experience"}),e.author._id===i.loggedInUser._id&&i.editingPhotos&&a.a.createElement(M,{chosenIcon:"faTrashAlt",color:"red",deleteExperiencePicture:d,picture:n}))}));return Object(r.useEffect)((function(){Sn(e.experience._id).then((function(n){console.log("Experience details :",n),o((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,experience:n})}))})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[e.userInSession,e.experience._id]),a.a.createElement(xt,null,a.a.createElement(Et,{onClick:function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(M,{chosenIcon:"faChevronDown"}):a.a.createElement(M,{chosenIcon:"faChevronRight"}),a.a.createElement("span",null,a.a.createElement(kt,null,i.experience.title),i.experience.date&&a.a.createElement(a.a.Fragment,null,(i.experience.showDate||e.author._id===i.loggedInUser._id)&&a.a.createElement(vt,{opacity:i.experience.showDate?"1":"0.4"},a.a.createElement(M,{chosenIcon:"faCalendarAlt",color:"grey"}),i.experience.date,!i.experience.showDate&&" (Hidden for other users)"),(i.experience.showTime||e.author._id===i.loggedInUser._id)&&a.a.createElement(vt,{opacity:i.experience.showTime?"1":"0.4"},a.a.createElement(M,{chosenIcon:"faClock",color:"grey"}),i.experience.time,!i.experience.showTime&&" (Hidden for other users)")))),i.expanded&&a.a.createElement(Ut,null,i.experience.description&&a.a.createElement(It,null,a.a.createElement(M,{chosenIcon:"faCommentDots",color:"grey"}),i.experience.description),i.experience.place&&a.a.createElement(jt,null,a.a.createElement(qe,{experienceMap:!0,address:i.experience.place.address,lat:i.experience.place.lat,lng:i.experience.place.lng,zoom:"15"})),i.experience.pictures&&a.a.createElement(yt,null,m),i.loggedInUser&&e.author._id===i.loggedInUser._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(wt,{onClick:function(){!i.editingPhotos&&s(),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{editingPhotos:!e.editingPhotos})}))}},a.a.createElement(M,{chosenIcon:i.editingPhotos?"faMinusSquare":"faPenSquare",color:"dimgrey"}),i.editingPhotos?"Close":"Edit photos"),a.a.createElement(Ot,{onClick:function(){!i.showAddPhoto&&u(),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{showAddPhoto:!e.showAddPhoto})}))}},a.a.createElement(M,{chosenIcon:i.showAddPhoto?"faMinusSquare":"faPlusSquare",color:"dimgrey"}),i.showAddPhoto?"Close":"Add a photo")),i.showAddPhoto&&a.a.createElement(Mt,Object.assign({experienceId:i.experience._id,closeShowAddPhoto:s,updateNewPicture:p},e)),i.loggedInUser&&i.loggedInUser._id===e.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(bt,null,a.a.createElement(c.b,{to:"/trips/".concat(i.experience.step.trip,"/steps/").concat(i.experience.step._id,"/edit-experience/").concat(i.experience._id)},a.a.createElement(M,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit experience"))))))};function Rt(){var e=Object(O.a)(["\n  :hover {\n    color: lightgrey;\n  }\n"]);return Rt=function(){return e},e}function zt(){var e=Object(O.a)(["\n  margin: 20px auto;\n  text-align: left;\n  display: flex;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return zt=function(){return e},e}function Bt(){var e=Object(O.a)(["\n  margin: 0 auto;\n"]);return Bt=function(){return e},e}function Nt(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Nt=function(){return e},e}function Ht(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return Ht=function(){return e},e}function Yt(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return Yt=function(){return e},e}function Gt(){var e=Object(O.a)(["\n  @keyframes slide-left {\n    0% {\n      transform: translateX(calc(100% - 5px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  animation: slide-left 0.65s ease-in-out forwards;\n"]);return Gt=function(){return e},e}var Wt=w.a.div(Gt()),qt=w.a.p(Yt()),Jt=w.a.div(Ht()),Kt=w.a.ul(Nt()),Vt=w.a.div(Bt()),Xt=w.a.li(zt()),Zt=w.a.span(Rt()),$t=function(e){var n=Object(r.useState)({loggedInUser:null,step:[],experiences:[],author:[],expanded:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){bn(e.step._id).then((function(n){console.log("Step details :",n),o((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,step:n})})),jn(e.step._id).then((function(e){console.log("Experiences of this step:",e),o((function(n){return Object(B.a)(Object(B.a)({},n),{},{experiences:e})}))})).catch((function(e){return console.log("Error while getting experiences :",e)})),X(e.step.trip._id).then((function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{author:e.author})}))}))})).catch((function(e){return console.log("Error while getting step details :",e)}))}),[e.userInSession,e.step.trip._id,e.step._id]);var u=i.experiences.map((function(n,t){return a.a.createElement(Xt,{key:n._id},a.a.createElement(Lt,Object.assign({experience:n,experienceNumber:t+1,author:i.author,userInSession:i.loggedInUser},e)))}));return a.a.createElement(Wt,null,a.a.createElement(Jt,{onClick:function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(M,{chosenIcon:"faChevronCircleDown"}):a.a.createElement(M,{chosenIcon:"faChevronCircleRight"}),a.a.createElement(Zt,null,i.step.title)),i.expanded&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Kt,null,a.a.createElement(Vt,null,u)),i.loggedInUser&&i.loggedInUser._id===i.step.trip.author&&a.a.createElement(a.a.Fragment,null,a.a.createElement(qt,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(i.step.trip._id,"/steps/").concat(i.step._id,"/add-experience"),state:{trip:i.trip}}},a.a.createElement(M,{chosenIcon:"faAsterisk"}),a.a.createElement("span",null,"Add an experience"))),a.a.createElement(qt,null,a.a.createElement(c.b,{to:"/trips/".concat(i.step.trip._id,"/edit-step/").concat(i.step._id)},a.a.createElement(M,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit step"))))))},Qt=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)({loggedInUser:null,trip:[],steps:[],experiences:[],lat:null,lng:null}),s=Object(l.a)(u,2),p=s[0],d=s[1];Object(r.useEffect)((function(){yn(e.match.params.id).then((function(e){var n=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lat}),0).toFixed(2)/e.filter((function(e){return e.place})).length,t=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lng}),0).toFixed(2)/e.filter((function(e){return e.place})).length;console.log("Experiences of this trip:",e),d((function(r){return Object(B.a)(Object(B.a)({},r),{},{experiences:e,lat:n,lng:t})}))})).catch((function(e){return console.log("Error while getting experiences :",e)})),X(e.match.params.id).then((function(n){console.log("Trip details :",n),null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,trip:n})})),xn(e.match.params.id).then((function(n){console.log("Steps of this trip:",n),d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,steps:n})}))})).catch((function(e){return console.log("Error while getting steps :",e)}))})).catch((function(e){console.log("Error while getting trip details :",e),o("Error : ".concat(e.response.data.message))}))}),[e.userInSession,e.match.params.id]);var m=p.steps.map((function(n,t){return a.a.createElement(Qn,{key:n._id},a.a.createElement($t,Object.assign({step:n,stepNumber:t+1,author:p.trip.author,userInSession:p.loggedInUser},e)))})),f=p.experiences.filter((function(e){return e.place})).map((function(e){return{lat:e.place.lat,lng:e.place.lng}}));return a.a.createElement(Kn,null,i?a.a.createElement(et,null,i):p.trip&&p.trip.isPublic||p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,a.a.createElement("h1",null,p.trip.title),p.loggedInUser&&a.a.createElement(Ee,{trip:p.trip,userInSession:p.loggedInUser,updateUser:e.updateUser})),a.a.createElement(Vn,null,a.a.createElement(M,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,p.trip.duration," days")),p.trip&&p.loggedInUser&&a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement(Oe,{trip:p.trip,userInSession:p.loggedInUser,updateTrips:function(){X(e.match.params.id).then((function(n){console.log("Trip details :",n),null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,trip:n})}))})).catch((function(e){console.log("Error while getting trip details :",e),o("Error : ".concat(e.response.data.message))}))}}),a.a.createElement("span",null,p.trip.likes.length)),p.trip.author&&a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"5px auto 20px"}},a.a.createElement(he,{src:p.trip.author.profilePicture,width:"50px",height:"50px",margin:"5px 15px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By ",a.a.createElement(c.b,{to:e.userInSession&&e.userInSession._id===p.trip.author._id?"/profile":"/profile/".concat(p.trip.author._id)},p.trip.author.username))),p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id&&!p.trip.isPublic&&a.a.createElement("p",{style:{opacity:"0.4"}},"(PRIVATE TRIP)"),p.experiences&&p.experiences.filter((function(e){return e.place})).length>=1?a.a.createElement(qe,{tripMap:!0,mapType:"tripPresentation",address:"",lat:1===p.experiences.length?p.experiences[0].place.lat:p.lat,lng:1===p.experiences.length?p.experiences[0].place.lng:p.lng,zoom:"14",allExperiencesCoords:f,hasOnlyOneLocalisation:1===f.length}):a.a.createElement(nt,{src:p.trip.imageUrl,alt:"trip cover pic"}),p.steps&&a.a.createElement(Zn,null,a.a.createElement($n,null,m)),p.loggedInUser&&p.loggedInUser._id===p.trip.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Xn,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(p.trip._id,"/add-step"),state:{trip:p.trip}}},a.a.createElement(M,{chosenIcon:"faPlus"}),a.a.createElement("span",null,"Add a step"))),a.a.createElement(Xn,null,a.a.createElement(c.b,{to:{pathname:"/trips/edit/".concat(p.trip._id),state:{trip:p.trip}}},a.a.createElement(M,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit trip")))),a.a.createElement("p",{style:{marginTop:"40px"}},a.a.createElement(c.b,{to:"/trips"},a.a.createElement(M,{chosenIcon:"faArrowCircleLeft",size:"2x"})))):"Sorry, this is a private trip.")},er=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){X(e.match.params.id).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting trip details :",e)}))}),[e.match.params.id]);var c=function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")},u=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"},{label:"Do you want to make it public ?",type:"checkbox",value:i.isPublic,checked:i.isPublic,name:"isPublic"},{label:"Image",type:"file",value:"",name:"imageUrl"},{label:"Start date*",type:"date",value:c(i.startDate),name:"startDate"},{label:"End date*",type:"date",value:c(i.endDate),name:"endDate"}];return a.a.createElement(Ln,Object.assign({tripForm:!0,formType:"trip",formInputs:u,formTitle:'Edit "'.concat(i.title,'"'),trip:i},e))},nr=function(e){var n={title:"",trip:e.match.params.id};return a.a.createElement(At,Object.assign({stepForm:!0,formType:"step",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "First day - London South and East"'}],initialState:n,tripId:e.match.params.id},e))},tr=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){bn(e.match.params.stepId).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting step details :",e)}))}),[e.match.params.stepId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"}];return a.a.createElement(Ln,Object.assign({stepForm:!0,formType:"step",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),step:i},e))},rr=function(e){var n={title:"",date:"",time:"",showDate:!1,showTime:!1,step:e.match.params.stepId,trip:e.match.params.id,description:"",place:null};return a.a.createElement(a.a.Fragment,null,a.a.createElement(At,Object.assign({experienceForm:!0,formType:"experience",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "Dinner in Camden Town"'},{label:"Date*",type:"date",name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",name:"showDate"},{label:"Time*",type:"time",name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",name:"showTime"},{label:"Description",type:"textarea",name:"description",placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",placeholder:'Ex: "Paris..."'}],initialState:n,tripId:e.match.params.id},e)))},ar=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){Sn(e.match.params.experienceId).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[e.match.params.experienceId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: Dinner at the Eiffel Tower"},{label:"Date*",type:"date",value:function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(i.date),name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",value:i.showDate,checked:i.showDate,name:"showDate"},{label:"Time*",type:"time",value:i.time,name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",value:i.showTime,checked:i.showTime,name:"showTime"},{label:"Description",type:"textarea",name:"description",value:i.description,placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",value:i.place,placeholder:'Ex: "Paris..."'}];return a.a.createElement(Ln,Object.assign({experienceForm:!0,formType:"experience",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),experience:i},e))};function ir(){var e=Object(O.a)(["\n  margin: 0;\n  text-align: center;\n  font-family: 'Roboto', 'Arial', 'Helvetica', sans-serif;\n  color: darkslategray;\n\n  a {\n    color: darkslategray;\n\n    &:hover {\n      color: lightgrey;\n    }\n  }\n"]);return ir=function(){return e},e}var or=w.a.div(ir()),cr=function(e){return a.a.createElement(At,Object.assign({tripForm:!0,formType:"trip",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:"Ex.: My magical trip to Paris"},{label:"Image",type:"file",name:"imageUrl"},{label:"Do you want to make it public ?",type:"checkbox",name:"isPublic"},{label:"Start Date*",type:"date",name:"startDate"},{label:"End Date*",type:"date",name:"endDate"}],initialState:{title:"",isPublic:!1,startDate:"",endDate:"",imageUrl:"",archive:null}},e))};function lr(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return lr=function(){return e},e}var ur=w.a.span(lr()),sr=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],u=i[1];Object(r.useEffect)((function(){u((function(n){return Object(B.a)(Object(B.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return o.loggedInUser._id===e.author._id})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var s=a.a.createElement(we,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return o.loggedInUser._id===e.author._id})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}});return a.a.createElement("div",null,a.a.createElement("h1",null,"My Trips"),o.trips.length>0?s:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"You don't have any trip yet !"),a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"}))),o.loggedInUser&&a.a.createElement(ur,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(M,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE TRIP"))))};function pr(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return pr=function(){return e},e}var dr=w.a.span(pr()),mr=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],u=i[1];Object(r.useEffect)((function(){u((function(n){return Object(B.a)(Object(B.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return-1!==o.loggedInUser.favorites.indexOf(e._id)})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var s=a.a.createElement(we,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return-1!==o.loggedInUser.favorites.indexOf(e._id)})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}});return a.a.createElement("div",null,a.a.createElement("h1",null,"My Favorite Trips"),o.trips.length>0?s:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"You don't have any favorite trip yet !"),a.a.createElement(c.b,{to:"/trips"},a.a.createElement(C,{formButton:"CHECK TRIPS",width:"250px"}))),o.loggedInUser&&a.a.createElement(dr,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(M,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE TRIP"))))},fr=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Error 404 not found"))};function gr(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 20px;\n\n  ul {\n    padding: 0;\n  }\n"]);return gr=function(){return e},e}var hr=w.a.div(gr()),xr=function(e){var n=Object(r.useState)(null),t=Object(l.a)(n,2),i=t[0],o=t[1],c=Object(r.useState)([]),u=Object(l.a)(c,2),s=u[0],p=u[1];Object(r.useEffect)((function(){(function(){var n=Object(N.a)(z.a.mark((function n(){return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f(e.match.params.userId).then((function(e){o({profileUser:e}),K().then((function(n){var t=n.filter((function(n){return n.isPublic&&n.author._id===e._id}));p(t)}))}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e.match.params.userId]);var d=a.a.createElement(we,{trips:s,userInSession:e.userInSession,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return e.isPublic&&e.author._id===i.profileUser._id})),p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}});return a.a.createElement(hr,null,i&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,i.profileUser.username),a.a.createElement(he,{src:i.profileUser.profilePicture,width:"150px",height:"150px",margin:"0 auto 20px"}),i&&s&&a.a.createElement("ul",null,a.a.createElement("h2",null,i.profileUser.username,"'s trips :"),d)))},br=function(){var e={loggedInUser:JSON.parse(localStorage.getItem("loggedInUser"))||null},n=Object(r.useState)(e),t=Object(l.a)(n,2),i=t[0],o=t[1],c=function(e){o({loggedInUser:e})};Object(r.useEffect)((function(){null===i.loggedInUser&&h().then((function(e){localStorage.setItem("loggedInUser",JSON.stringify(e)),o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))}),[i.loggedInUser]);var s=function(){h().then((function(e){o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))};return a.a.createElement(or,null,a.a.createElement(L,{userInSession:i.loggedInUser,getUser:c}),a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/",render:function(e){return a.a.createElement(je,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/trips",render:function(e){return a.a.createElement(ln,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/search",render:function(e){return a.a.createElement(un,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/trips/:id",render:function(e){return a.a.createElement(Qt,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(pn,{exact:!0,path:"/trips/edit/:id",userInSession:i.loggedInUser,component:er}),a.a.createElement(pn,{exact:!0,path:"/trips/:id/add-step",userInSession:i.loggedInUser,component:nr}),a.a.createElement(pn,{exact:!0,path:"/trips/:id/edit-step/:stepId",userInSession:i.loggedInUser,component:tr}),a.a.createElement(pn,{exact:!0,path:"/trips/:id/steps/:stepId/add-experience",userInSession:i.loggedInUser,component:rr}),a.a.createElement(pn,{exact:!0,path:"/trips/:id/steps/:stepId/edit-experience/:experienceId",userInSession:i.loggedInUser,component:ar}),a.a.createElement(u.b,{exact:!0,path:"/signup",render:function(e){return a.a.createElement(nn,Object.assign({},e,{getUser:c}))}}),a.a.createElement(u.b,{exact:!0,path:"/login",render:function(e){return a.a.createElement(tn,Object.assign({},e,{getUser:c}))}}),a.a.createElement(pn,{exact:!0,path:"/profile",userInSession:i.loggedInUser,component:zn}),a.a.createElement(u.b,{exact:!0,path:"/profile/:userId",render:function(e){return a.a.createElement(xr,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(pn,{exact:!0,path:"/profile/my-trips",userInSession:i.loggedInUser,component:sr,updateUser:s}),a.a.createElement(pn,{exact:!0,path:"/profile/favorite-trips",userInSession:i.loggedInUser,component:mr,updateUser:s}),a.a.createElement(pn,{exact:!0,path:"/create-trip",userInSession:i.loggedInUser,component:cr}),a.a.createElement(u.b,{component:fr})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(br,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.d1463c50.chunk.js.map