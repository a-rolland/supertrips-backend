(this["webpackJsonpsupertrips-frontend"]=this["webpackJsonpsupertrips-frontend"]||[]).push([[0],{53:function(e,n,t){e.exports=t(87)},58:function(e,n,t){},87:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(16),o=t.n(i),c=t(6),l=(t(58),t(5)),s=t(8),u=t(17),p=t.n(u),d=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),m=function(e){throw e},f=function(e){return d.post("/signup",e).then((function(e){return e.data})).catch(m)},g=function(){return d.get("/loggedIn").then((function(e){return e.data}))},h=function(e){return d.post("/login",e).then((function(e){return e.data}))},x=function(){return localStorage.removeItem("loggedInUser"),d.post("/logout",{}).then((function(e){return e.data}))},b=function(e,n){return d.put("/profile/profilePicture",n).then((function(e){return e.data})).catch(m)},E=function(e){return d.put("/toggleAddToFavorites/".concat(e)).then((function(e){return e.data})).catch(m)},v=function(e){return d.post("/auth/facebook",e).then((function(e){return e.data})).catch(m)},O=t(2),I=t(3);function y(){var e=Object(O.a)(["\n  @media (max-width: 767px) {\n    display: ",";\n    flex-direction: column;\n    list-style-type: none;\n    top: 50px;\n    right: 0px;\n    padding-left: 0;\n    width: 200px;\n    position: absolute;\n    height: fit-content;\n    background-color: rgba(255, 255, 255, 0.8);\n    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n    animation-name: menu-transition;\n    animation-duration: .3s;\n\n    li {\n      margin: ",";\n      list-style-type: none;\n      display: flex;\n\n      a {\n        text-decoration: none;\n\n        &:hover {\n          color: lightgrey;\n        }\n      }\n    }\n  }\n\n  @media (min-width: 767px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    list-style-type: none;\n    padding: 0;\n    width: 100%;\n\n    li {\n      margin: ",";\n\n      a {\n        text-decoration: none;\n\n        &:hover {\n          color: lightgrey;\n        }\n      }\n    }\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(O.a)(["\n  @keyframes menu-transition {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  padding: 0;\n  border-bottom: 1px solid lightgrey;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0;\n\n  @media (max-width: 768px) {\n    justify-content: space-between;\n  }\n\n  h3 {\n    padding-bottom: 2px;  \n    \n    a {\n      text-decoration: none;\n    }\n  }\n\n  span {\n    align-self: center;\n\n    &:hover {\n      cursor: pointer;\n    }\n\n    @media (min-width: 767px) {\n      display: none;\n    }\n  }\n"]);return w=function(){return e},e}var j=I.a.div(w()),S=I.a.ul(y(),(function(e){return e.showDropdown}),(function(e){return e.margin||"10px auto"}),(function(e){return e.margin||"auto 10px auto 10px"}));function U(){var e=Object(O.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  background-color: ",";\n  color: ",";\n  width: ",";\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return U=function(){return e},e}var k=I.a.input(U(),(function(e){return e.theme}),(function(e){return e.color}),(function(e){return e.width}));k.defaultProps={theme:"white",color:"black"};var P=function(e){return a.a.createElement(k,{type:"submit",value:e.formButton,onClick:function(){e.toggleDeleteConfirmation&&e.toggleDeleteConfirmation(),e.closeDeleteConfirmation&&e.closeDeleteConfirmation(),e.deleteItem&&e.deleteItem(),e.toggleProfilePictureForm&&e.toggleProfilePictureForm(),e.logoutUser&&e.logoutUser()},theme:e.theme,color:e.color,width:e.width})},T=t(44),_=t(7),C=t(45),D=function(e){var n;switch(e.chosenIcon){case"faHourglassHalf":n=_.m;break;case"faSuitcaseRolling":n=_.s;break;case"faFeatherAlt":n=_.k;break;case"faPlus":n=_.p;break;case"faAsterisk":n=_.b;break;case"faChevronCircleRight":n=_.f;break;case"faChevronCircleDown":n=_.e;break;case"faTimes":n=_.u;break;case"faBars":n=_.c;break;case"faSpinner":n=_.r;break;case"faChevronRight":n=_.h;break;case"faChevronDown":n=_.g;break;case"faArrowCircleLeft":n=_.a;break;case"faClock":n=_.i;break;case"faCalendarAlt":n=_.d;break;case"faPlusSquare":n=_.q;break;case"faMinusSquare":n=_.n;break;case"faCommentDots":n=_.j;break;case"faHeart":n=_.l;break;case"faTrashAlt":n=_.v;break;case"faPenSquare":n=_.o;break;case"faThumbsUp":n=_.t;break;case"faFacebook":n=C.a;break;default:n=null}return a.a.createElement(T.a,{icon:n,size:e.size,color:e.color,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,onClick:function(){e.toggleDropdown&&e.toggleDropdown(),e.toggleAddToFavorites&&e.toggleAddToFavorites(e.trip._id),e.deleteExperiencePicture&&e.deleteExperiencePicture(e.picture._id),e.toggleLikeTrip&&e.userInSession&&!e.tripDescription&&e.toggleLikeTrip(e.trip._id)}})},A=function(e){var n=Object(r.useState)({loggedInUser:null}),t=Object(l.a)(n,2),i=t[0],o=t[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),p=u[0],d=u[1],m=Object(r.useState)("grey"),f=Object(l.a)(m,2),g=f[0],h=f[1],b=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),E=Object(l.a)(b,2),v=E[0],O=E[1];Object(r.useEffect)((function(){window.addEventListener("resize",(function(){return O({width:window.innerWidth,height:window.innerHeight})})),v.width>=767&&I(),console.log("User In Session :",e.userInSession),o({loggedInUser:e.userInSession})}),[e.userInSession,v.width]);var I=function(){d(!1)},y=function(){h("grey"===g?"black":"grey")};return a.a.createElement(j,null,a.a.createElement("h3",null,a.a.createElement(c.b,{to:"/",onClick:I},"Supertrips")),a.a.createElement("span",null,a.a.createElement(D,{chosenIcon:p?"faTimes":"faBars",size:"lg",color:g,handleMouseEnter:y,handleMouseLeave:y,toggleDropdown:function(){d(!p)}})),a.a.createElement(S,{showDropdown:p?"flex":"none"},a.a.createElement("li",{style:p?{margin:"20px auto"}:{margin:"auto auto auto 20px"}},a.a.createElement(c.b,{to:"/trips",onClick:I},"Trips")),i.loggedInUser?a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/profile",onClick:I},"Profile")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/",onClick:I},a.a.createElement(P,{logoutUser:function(){x().then((function(){o({loggedInUser:null}),e.getUser(null)}))},formButton:"LOGOUT"})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/signup",onClick:I},"Signup")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/login",onClick:I},"Login")))))},F=t(9),L=t.n(F),R=t(14);function M(){var e=Object(O.a)(["\n  padding: 12px 20px;\n  border: 1px solid lightgrey;\n  margin: 8px 0 24px;\n  font-size: 17px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  width: 500px;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n\n  @media (min-width: 992px) {\n    width: 700px;\n  }\n"]);return M=function(){return e},e}var z=I.a.input(M()),B=function(e){return a.a.createElement(z,{type:"text",placeholder:e.placeholder,onChange:function(n){var t=n.target.value;e.searchUpdates(t)}})},N=function(e){var n=Object(r.useState)(e.userInSession),t=Object(l.a)(n,2),i=(t[0],t[1]),o=Object(r.useState)({search:""}),c=Object(l.a)(o,2),s=c[0],u=c[1];Object(r.useEffect)((function(){i(e.userInSession)}),[e.userInSession]);var p=function(){var e=Object(R.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u({search:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement("div",null,e.userInSession?a.a.createElement("h1",null,"Hi ",e.userInSession.username,", welcome to Supertrips !"):a.a.createElement("h1",null,"Welcome to Supertrips !"),a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.history.push({pathname:"/search",state:{userInSession:e.userInSession,searchKeys:s.search}})}},a.a.createElement(B,{placeholder:"Search for a trip..",searchUpdates:p}),a.a.createElement(P,{formButton:"GO"})))},K=t(23),Y=t(4);function H(){var e=Object(O.a)(["\n  width: 100%;\n  height: 150px;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  resize: none;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return H=function(){return e},e}function W(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return W=function(){return e},e}function G(){var e=Object(O.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 20px;\n  margin: 20px auto;\n  max-width: 350px;\n"]);return G=function(){return e},e}var J=I.a.form(G()),q=I.a.input(W()),V=I.a.textarea(H()),Z=t(46),X=t(47),$=t(52),Q=t(50),ee=t(25),ne=t.n(ee);function te(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 8px 20px;\n  border: 1px solid rgba(0,0,0,.1);\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return te=function(){return e},e}function re(){var e=Object(O.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return re=function(){return e},e}var ae=I.a.input(re()),ie=I.a.div(te()),oe=function(e){Object($.a)(t,e);var n=Object(Q.a)(t);function t(e){var r;return Object(Z.a)(this,t),(r=n.call(this,e)).handleChange=function(e){r.setState({address:e})},r.handleSelect=function(e){Object(ee.geocodeByAddress)(e).then((function(e){return Object(ee.getLatLng)(e[0])})).then((function(n){r.setState(Object(Y.a)({address:e},n)),r.props.setPlace(r.state),console.log("Success",n)})).catch((function(e){return console.error("Error",e)}))},r.state={address:""},r}return Object(X.a)(t,[{key:"render",value:function(){return a.a.createElement(ne.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var n=e.getInputProps,t=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ae,n({placeholder:"Search Places ...",className:"location-search-input"})),a.a.createElement("div",{className:"autocomplete-dropdown-container"},i&&a.a.createElement(D,{chosenIcon:"faSpinner",size:"2x"}),t.map((function(e){var n=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return a.a.createElement(ie,Object.assign({},r(e,{className:n,style:t}),{key:e.index}),a.a.createElement("span",null,e.description))}))))}))}}]),t}(a.a.Component),ce=t(48);function le(){var e=Object(O.a)(["\n  ",";\n\n  @media (max-width: 600px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 576px) and (max-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 992px) {\n    ",";\n    ",";\n  }\n"]);return le=function(){return e},e}var se=I.a.div(le(),(function(e){return e.formMap&&"box-sizing: border-box; height: 200px; border-radius: 4px;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 300px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 450px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 300px;"}),(function(e){return e.experienceMap&&"width: 600px; height: 250px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 400px;"}),(function(e){return e.experienceMap&&"width: 800px; height: 300px; margin: 0 auto;"})),ue=function(e){var n={name:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng),zoom:e.zoom},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=(i[1],{lat:o.lat,lng:o.lng}),s=parseInt(o.zoom),u=function(e,n,t){var r=function(e,n,t){var r=new n.LatLngBounds;return t.forEach((function(e){r.extend(new n.LatLng(e.lat,e.lng))})),r}(0,n,t);e.fitBounds(r),function(e,n,t){n.event.addDomListenerOnce(e,"idle",(function(){n.event.addDomListener(window,"resize",(function(){e.fitBounds(t)}))}))}(e,n,r)};return a.a.createElement(se,{tripMap:e.tripMap,experienceMap:e.experienceMap,formMap:e.formMap},a.a.createElement(ce.a,{key:o.name,bootstrapURLKeys:{key:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://supertrips.herokuapp.com",REACT_APP_FACEBOOK_APP_ID:"651873985443420",REACT_APP_GOOGLE_MAPS_KEY:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY"}).GOOGLE_MAPS_KEY)},defaultCenter:c,defaultZoom:s,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(n){var t=n.map,r=n.maps;e.tripMap&&!e.hasOnlyOneLocalisation&&u(t,r,e.allExperiencesCoords),function(n,t){if("tripPresentation"===e.mapType)e.allExperiencesCoords.forEach((function(e){new t.Marker({position:e,map:n})}));else{var r={lat:o.lat,lng:o.lng};new t.Marker({position:r,map:n})}}(t,r)}}))},pe=function(e){var n=Object(r.useState)(e.formState),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){o((function(n){return e.formState}))}),[e.formState]);var c=function(e){var n=e.target,t=n.name,r=n.value,a=n.type,i=n.checked,c=n.files;o("imageUrl"===t||"profilePicture"===t?function(e){return Object(Y.a)(Object(Y.a)({},e),{},{archive:c[0]})}:function(e){return Object(Y.a)(Object(Y.a)({},e),{},Object(K.a)({},t,"checkbox"===a?i:"date"===a?function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(r):"file"===a?c[0]:r))})},s=function(e){o((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{place:{address:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng)}})}))},u=e.formInputs.map((function(e){return"textarea"===e.type?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(V,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c})):"place"===e.name?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(oe,{setPlace:s}),i.place&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Is this the correct place ?"),a.a.createElement(ue,{formMap:!0,key:i.place.address,address:i.place.address,lat:i.place.lat,lng:i.place.lng,zoom:"14"}))):a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(q,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c}))}));return a.a.createElement("div",null,a.a.createElement(J,{onSubmit:function(n){return function(n,t){n.preventDefault(),e.formSubmit(t)}(n,i)}},a.a.createElement("h3",null,e.formTitle),u,e.auth||"experience photo"===e.formType||a.a.createElement("p",null,"*required"),a.a.createElement(P,{formButton:e.formButton})))};function de(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  margin: 50px;\n\n  svg {\n    margin: 0 20px 0 0;\n  }\n\n  @media (max-width: 667px) {\n      flex-direction: column;\n\n      svg {\n        margin: 20px;\n      }\n    }\n"]);return de=function(){return e},e}function me(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return me=function(){return e},e}var fe=I.a.p(me()),ge=I.a.p(de()),he=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1];return a.a.createElement("div",null,a.a.createElement(pe,{auth:!0,formTitle:e.login?"Login":"Sign-up",formSubmit:function(n){(e.login?h(n):f(n)).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){console.log("Error while login/signup :",e),o(e.response.data.message)}))},formState:{username:"",password:""},formInputs:[{label:"Username",type:"text",name:"username",placeholder:"Enter your username"},{label:"Password",type:"password",name:"password",placeholder:"*******"}]}),a.a.createElement("p",null,e.authMessage,a.a.createElement(c.b,{to:"".concat(e.formRedirectLink)},e.formRedirectText)),i&&a.a.createElement(fe,null,i))},xe=t(24),be=t.n(xe),Ee=function(e){return a.a.createElement("div",null,a.a.createElement(he,Object.assign({},e,{signup:!0,getUser:e.getUser,formButton:"SIGN-UP",authMessage:"Already have an account ?",formRedirectLink:"/login",formRedirectText:" Login"})),a.a.createElement(ge,null,a.a.createElement(D,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(be.a,{style:{display:"block"},appId:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://supertrips.herokuapp.com",REACT_APP_FACEBOOK_APP_ID:"651873985443420",REACT_APP_GOOGLE_MAPS_KEY:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY"}).FACEBOOK_KEY),autoLoad:!1,fields:"name,email,picture",callback:function(n){v({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){return console.log(e)}))}})))},ve=function(e){return a.a.createElement("div",null,a.a.createElement(he,Object.assign({},e,{login:!0,getUser:e.getUser,formButton:"LOGIN",authMessage:"Don't have any account yet ?",formRedirectLink:"/signup",formRedirectText:" Sign-up"})),a.a.createElement(ge,null,a.a.createElement(D,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(be.a,{style:{display:"block"},appId:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://supertrips.herokuapp.com",REACT_APP_FACEBOOK_APP_ID:"651873985443420",REACT_APP_GOOGLE_MAPS_KEY:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY"}).FACEBOOK_KEY),autoLoad:!1,reauthenticate:!0,fields:"name,email,picture",callback:function(n){console.log(n),v({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){return console.log(e)}))}})))},Oe=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),Ie=function(e){throw e},ye=function(e){return Oe.post("/newTrip",e).then((function(e){return e.data})).catch(Ie)},we=function(){return Oe.get("/trips").then((function(e){return e.data})).catch(Ie)},je=function(e){return Oe.get("/trips/".concat(e)).then((function(e){return e.data})).catch(Ie)},Se=function(e,n){return Oe.put("/trips/".concat(e),n).then((function(e){return e.data})).catch(Ie)},Ue=function(e){return Oe.delete("/trips/".concat(e)).then((function(e){return e.data})).catch(Ie)},ke=function(e){return Oe.put("/trip/toggleLikes/".concat(e)).then((function(e){return e.data})).catch(Ie)};function Pe(){var e=Object(O.a)(["\n  position: relative;\n  text-align: center;\n  \n  a {\n    img {\n      @keyframes slow-popup {\n        0% {\n          opacity: 0;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      height: auto;\n      width: 300px;\n      max-width: 400px;\n      margin-right: 40px;\n      animation: slow-popup 0.5s ease-in-out forwards;\n\n      @media (max-width:768px) {\n        margin-right: 0;\n        height: auto;\n        width: 100%;\n      }\n\n      @media (min-width: 992px) {\n        height: auto;\n        width: 400px;\n        margin-right: 40px;\n      }\n    }\n  }\n\n  svg {\n    position: absolute;\n    bottom: 20px;\n    left: 15px;\n    background-color: rgba(255,255,255,.6);\n    border: 1px solid rgba(0,0,0,0.2);\n    border-radius: 25%;\n    padding: 10px;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return Pe=function(){return e},e}function Te(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n\n  @media (max-width: 767px) {\n    display: flex;\n    flex-direction: column;\n  }\n\n  img {\n    @keyframes slow-popup {\n      0% {\n        opacity: 0;\n      }\n      100% {\n        opacity: 1;\n      }\n    }\n\n    height: auto;\n    width: 300px;\n    max-width: 400px;\n    margin-right: 40px;\n    animation: slow-popup 0.5s ease-in-out forwards;\n\n    @media (max-width:768px) {\n      margin-right: 0;\n      height: auto;\n      width: 100%;\n    }\n\n    @media (min-width: 992px) {\n      height: auto;\n      width: 400px;\n      margin-right: 40px;\n    }\n  }\n\n  div {\n    @media (max-width: 767px) {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n    }\n\n    a {\n      display: inline-block;\n      margin-right: 20px;\n    }\n\n    h3 {\n      @media (min-width: 992px) {\n        font-size: 26px;\n      }\n    }\n\n    div {\n      @media (max-width: 767px) {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      a {\n        display: inline-block;\n      }\n    }\n  }\n"]);return Te=function(){return e},e}function _e(){var e=Object(O.a)(["\n  margin: 40px;\n  text-align: left;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n\n  @media (max-width: 767px) {\n    justify-content: center;\n  }\n\n  svg {\n    margin: 0 10px 0 0;\n    padding-top: 4px;\n  }\n\n  a {\n    text-decoration: none;\n  }\n"]);return _e=function(){return e},e}function Ce(){var e=Object(O.a)(["\n  margin: 0 auto;\n"]);return Ce=function(){return e},e}function De(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return De=function(){return e},e}var Ae=I.a.ul(De()),Fe=I.a.div(Ce()),Le=I.a.li(_e()),Re=I.a.div(Te()),Me=I.a.div(Pe());function ze(){var e=Object(O.a)(["\n  display: ",";\n  align-self: ",";\n  width: ",";\n  height: ",";\n  margin: ",";\n  background-image: url(",");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n"]);return ze=function(){return e},e}var Be=I.a.div(ze(),(function(e){return e.display||"block"}),(function(e){return e.alignSelf}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.margin}),(function(e){return e.src})),Ne=function(e){return a.a.createElement(Be,{src:e.src,width:e.width,height:e.height,margin:e.margin,display:e.display})};function Ke(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return Ke=function(){return e},e}var Ye=I.a.span(Ke()),He=function(e){var n={loggedInUser:e.userInSession},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=i[1],s=Object(r.useCallback)((function(){return g().then((function(e){c({loggedInUser:e})})).catch((function(e){return console.log("Error adding/removing to/from favorite trips: ",e)}))}),[]);return a.a.createElement(Ye,null,a.a.createElement(D,{chosenIcon:"faHeart",color:-1!==o.loggedInUser.favorites.indexOf(e.trip._id)?"red":"grey",toggleAddToFavorites:function(n){E(n).then((function(){s(),e.updateUser()})).catch((function(e){return console.log("An error occurred while adding/removing to/from favorites: ",e)}))},trip:e.trip}))};function We(){var e=Object(O.a)(["\n  &:hover {\n    ","\n  }\n"]);return We=function(){return e},e}var Ge=I.a.span(We(),(function(e){return e.userInSession&&!e.tripDescription?"cursor: pointer":""})),Je=function(e){return a.a.createElement(Ge,{userInSession:e.userInSession,tripDescription:e.tripDescription},a.a.createElement(D,{tripDescription:e.tripDescription,chosenIcon:"faThumbsUp",color:e.tripDescription?"grey":-1!==e.trip.likes.indexOf(e.userInSession._id)?"royalblue":"grey",toggleLikeTrip:function(n){ke(n).then((function(){e.updateTrips()})).catch((function(e){return console.log("Error adding/removing Like to/from this trip: ",e)}))},trip:e.trip,size:"1x",userInSession:e.userInSession}))},qe=function(e){var n=e.trips.map((function(n){return a.a.createElement(Le,{key:n._id},a.a.createElement(Re,null,a.a.createElement(Me,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},n.imageUrl&&a.a.createElement("img",{src:n.imageUrl,alt:"trip cover pic"})),e.userInSession&&a.a.createElement(Je,{trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips})),a.a.createElement("div",null,a.a.createElement("span",null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},a.a.createElement("h3",null,n.title)),e.userInSession&&a.a.createElement(He,{trip:n,userInSession:e.userInSession,updateUser:e.updateUser})),a.a.createElement("div",null,a.a.createElement(D,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,n.duration," days")),a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement(Je,{tripDescription:!0,trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips}),a.a.createElement("span",null,n.likes.length)),a.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"20px"}},a.a.createElement(Ne,{src:n.author.profilePicture,width:"20px",height:"20px",margin:"5px 10px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By ",a.a.createElement(c.b,{to:"#"},n.author.username))))))}));return a.a.createElement(Ae,null,a.a.createElement(Fe,null,n))};function Ve(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return Ve=function(){return e},e}var Ze=I.a.span(Ve()),Xe=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],s=i[1];Object(r.useEffect)((function(){s((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var n=Object(R.a)(L.a.mark((function n(){var t,r;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,we();case 2:t=n.sent,r=t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var u=function(){var n=Object(R.a)(L.a.mark((function n(t){var r,a;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,we();case 2:r=n.sent,a=r.filter((function(n){return(n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(t.toUpperCase())})),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:a})}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=a.a.createElement(qe,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var n=Object(R.a)(L.a.mark((function n(){var t,r;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,we();case 2:t=n.sent,r=t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}});return a.a.createElement("div",null,a.a.createElement("h1",null,"Trips"),a.a.createElement(B,{placeholder:"Search for a trip..",searchUpdates:u}),p,o.loggedInUser&&a.a.createElement(Ze,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(D,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE"),a.a.createElement("span",null,"TRIP"))))},$e=function(e){var n=Object(r.useState)({loggedInUser:null,trips:[]}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){o((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var n=Object(R.a)(L.a.mark((function n(){var t,r;return L.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,we();case 2:t=n.sent,r=t.filter((function(n){return(n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(e.location.state.searchKeys.toUpperCase())})),o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e.userInSession,e.location.state.searchKeys]);var c=a.a.createElement(qe,{trips:i.trips,userInSession:i.loggedInUser,updateUser:e.updateUser});return a.a.createElement("div",null,a.a.createElement("h1",null,'Search results for: "',e.location.state.searchKeys,'"'),c)},Qe=t(51),en=function(e){var n=e.component,t=e.userInSession,r=Object(Qe.a)(e,["component","userInSession"]);return a.a.createElement(s.b,Object.assign({},r,{render:function(e){return t?a.a.createElement(n,Object.assign({},e,{userInSession:t},r)):a.a.createElement(s.a,{to:{pathname:"/",state:{from:e.location}}})}}))};function nn(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return nn=function(){return e},e}var tn=I.a.div(nn()),rn=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),an=function(e){throw e},on=function(e){return rn.post("/newStep",e).then((function(e){return e.data})).catch(an)},cn=function(e){return rn.get("/steps/".concat(e)).then((function(e){return e.data})).catch(an)},ln=function(e){return rn.get("/stepDetails/".concat(e)).then((function(e){return e.data})).catch(an)},sn=function(e,n){return rn.put("/steps/".concat(e),n).then((function(e){return e.data})).catch(an)},un=function(e){return rn.delete("/steps/".concat(e)).then((function(e){return e.data})).catch(an)},pn=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),dn=function(e){throw e},mn=function(e){return pn.post("/newExperience",e).then((function(e){return e.data})).catch(dn)},fn=function(e){return pn.get("/experiences/".concat(e)).then((function(e){return e.data})).catch(dn)},gn=function(e){return pn.get("/experiences/trip/".concat(e)).then((function(e){return e.data})).catch(dn)},hn=function(e){return pn.get("/experienceDetails/".concat(e)).then((function(e){return e.data})).catch(dn)},xn=function(e,n){return pn.put("/experiences/".concat(e),n).then((function(e){return e.data})).catch(dn)},bn=function(e){return pn.delete("/experiences/".concat(e)).then((function(e){return e.data})).catch(dn)},En=function(e,n){return pn.put("/experiences/addPicture/".concat(e),n).then((function(e){return e.data})).catch(dn)},vn=function(e,n){return pn.delete("/experiences/".concat(e,"/deletePicture/").concat(n)).then((function(e){return e.data})).catch(dn)};function On(){var e=Object(O.a)(["\n  margin: 40px;\n"]);return On=function(){return e},e}function In(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return In=function(){return e},e}function yn(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return yn=function(){return e},e}var wn=I.a.div(yn()),jn=I.a.p(In()),Sn=I.a.div(On()),Un=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),p=u[0],d=u[1],m=Object(r.useState)(""),f=Object(l.a)(m,2),h=f[0],x=f[1],E=Object(r.useState)(""),v=Object(l.a)(E,2),O=v[0],I=v[1],y=function(){d(!p)};Object(r.useEffect)((function(){var n=e.match.params;(e.tripForm?je(n.id):e.stepForm?ln(n.stepId):e.experienceForm?hn(n.experienceId):g()).then((function(n){e.tripForm?o(Object(Y.a)(Object(Y.a)({},n),{},{imageUrl:"",originalImg:n.imageUrl})):e.profilePictureForm?o({profilePicture:"",originalImg:n.profilePicture}):o(n)})).catch((function(n){return console.log("Error while getting ".concat(e.formType," details :"),n)}))}),[e.formType,e.stepForm,e.tripForm,e.experienceForm,e.profilePictureForm,e.match]);return a.a.createElement(wn,null,O?a.a.createElement(Sn,null,a.a.createElement(D,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(pe,{formTitle:e.formTitle,formSubmit:function(n){var t=e.match.params;I(!0),console.log("FORM OBJECT",n);var r=new FormData;e.tripForm&&(r.append("title",n.title),n.archive?r.append("imageUrl",n.archive):r.append("imageUrl",n.originalImg),r.append("isPublic",n.isPublic),r.append("startDate",n.startDate),r.append("endDate",n.endDate),console.log("uploadData",r)),e.profilePictureForm&&(n.archive?r.append("profilePicture",n.archive):r.append("profilePicture",n.originalImg),console.log("uploadData",r)),(e.tripForm?Se(t.id,r):e.stepForm?sn(t.stepId,n):e.experienceForm?xn(t.experienceId,n):b(e.user._id,r)).then((function(n){console.log("".concat(e.formType," edited!"),n),I(!1),e.profilePictureForm?e.updateProfilePicture():e.history.push({pathname:"/trips/".concat(t.id)})})).catch((function(n){I(!1),console.log("Error while editing ".concat(e.formType,":"),n),x(n.response.data.message)}))},formState:i,formInputs:e.formInputs,formButton:"SAVE"}),a.a.createElement(a.a.Fragment,null,a.a.createElement(P,{toggleDeleteConfirmation:y,formButton:"DELETE",theme:"lightcoral",color:"white"}),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Are you sure you want to delete this ",e.formType," ? "),a.a.createElement(P,{deleteItem:function(){var n=e.match.params,t=e.tripForm?Ue(n.id):e.stepForm?un(n.stepId):e.experienceForm?bn(n.experienceId):b(e.user._id,{profilePicture:"https://res.cloudinary.com/nutriapp/image/upload/v1599217287/profileDefault_jr9j16.png"}),r=e.tripForm?"/trips":e.profilePictureForm?"/profile":"/trips/".concat(n.id);t.then((function(n){console.log(n),e.profilePictureForm&&e.updateProfilePicture(),e.history.push(r)})).catch((function(n){console.log("Error while deleting ".concat(e.formType,": "),n)}))},closeDeleteConfirmation:function(){d(!1)},formButton:"YES",theme:"lightcoral",color:"white"}),a.a.createElement(P,{toggleDeleteConfirmation:y,formButton:"CANCEL",theme:"lightgrey",color:"black"})),e.profilePictureForm||a.a.createElement(a.a.Fragment,null,h&&a.a.createElement(jn,null,h),a.a.createElement("p",null,a.a.createElement(c.b,{to:"/trips/".concat(e.match.params.id)},a.a.createElement(D,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))))},kn=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){g().then((function(e){o(e)})).catch((function(e){return console.log("Error while getting user details :",e)}))}),[]);return a.a.createElement(Un,Object.assign({profilePictureForm:!0,formType:"profile picture",formInputs:[{type:"file",value:"",name:"profilePicture"}],formTitle:"Edit Profile Picture",updateProfilePicture:e.updateProfilePicture,user:i},e))},Pn=function(e){var n=Object(r.useState)({loggedInUser:e.userInSession}),t=Object(l.a)(n,2),i=t[0],o=t[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),p=u[0],d=u[1],m=Object(r.useCallback)((function(){return g().then((function(e){d(!1),o({loggedInUser:e})})).catch((function(e){return console.log("Error updating profile picture: ",e)}))}),[]);return a.a.createElement(tn,null,a.a.createElement("h1",null,"Profile"),a.a.createElement(Ne,{src:i.loggedInUser.profilePicture,width:"150px",height:"150px",margin:"0 auto 20px"}),p&&a.a.createElement(kn,Object.assign({updateProfilePicture:m},e)),a.a.createElement(P,{formButton:p?"CLOSE":"EDIT",toggleProfilePictureForm:function(){d(!p)}}),a.a.createElement("h2",null,"Welcome to your profile, ",e.userInSession.username," !"),a.a.createElement(c.b,{to:"/profile/my-trips"},a.a.createElement(P,{formButton:"MY TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/profile/favorite-trips"},a.a.createElement(P,{formButton:"FAVORITE TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(P,{formButton:"CREATE A NEW TRIP",width:"250px"})))};function Tn(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 50px auto;\n  }\n"]);return Tn=function(){return e},e}function _n(){var e=Object(O.a)(["\n  margin: 20px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return _n=function(){return e},e}function Cn(){var e=Object(O.a)(["\n  margin: 0 auto;\n  width: 100%;\n"]);return Cn=function(){return e},e}function Dn(){var e=Object(O.a)(["\n  margin: 20px auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Dn=function(){return e},e}function An(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return An=function(){return e},e}function Fn(){var e=Object(O.a)(["\n  margin: 20px auto;\n"]);return Fn=function(){return e},e}function Ln(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n\n  img {\n    max-height: 300px;\n    width: auto;\n  }\n\n  span {\n    h1 {\n      display: inline-block;\n    }\n\n    svg {\n      margin-left: 20px;\n      padding-bottom: 2px;\n    }\n  }\n"]);return Ln=function(){return e},e}var Rn=I.a.div(Ln()),Mn=I.a.div(Fn()),zn=I.a.p(An()),Bn=I.a.ul(Dn()),Nn=I.a.div(Cn()),Kn=I.a.li(_n()),Yn=I.a.p(Tn());function Hn(){var e=Object(O.a)(["\n  position: relative;\n  text-align: center;\n\n  img {\n    height: 200px;\n    width: auto;\n    margin: 20px;\n\n    @media (max-width: 767px) {\n      height: 100px;\n      width: auto;\n      margin: 10px;\n    }\n\n    @media (min-width: 992px) {\n      height: 300px;\n      width: auto;\n      margin: 20px;\n    }\n  }\n\n  svg {\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    background-color: rgba(255,255,255,.4);\n    border: 1px solid rgba(0,0,0,0.2);\n    border-radius: 25%;\n    padding: 3px;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return Hn=function(){return e},e}function Wn(){var e=Object(O.a)(["\n  text-align: center;\n"]);return Wn=function(){return e},e}function Gn(){var e=Object(O.a)(["\n  display: flex;\n  justify-content: center;\n"]);return Gn=function(){return e},e}function Jn(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: grey;\n  }\n"]);return Jn=function(){return e},e}function qn(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: grey;\n  }\n"]);return qn=function(){return e},e}function Vn(){var e=Object(O.a)(["\n  margin: 20px;\n  margin-left: 50px;\n"]);return Vn=function(){return e},e}function Zn(){var e=Object(O.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n  opacity: ",";\n"]);return Zn=function(){return e},e}function Xn(){var e=Object(O.a)(["\n  margin: 10px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return Xn=function(){return e},e}function $n(){var e=Object(O.a)(["\n  margin: 0 auto;\n"]);return $n=function(){return e},e}function Qn(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Qn=function(){return e},e}function et(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return et=function(){return e},e}function nt(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return nt=function(){return e},e}function tt(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n\n  animation: slide-up 0.65s ease-in-out forwards;\n"]);return tt=function(){return e},e}var rt=I.a.div(tt()),at=I.a.p(nt()),it=I.a.div(et()),ot=(I.a.ul(Qn()),I.a.div($n()),I.a.li(Xn()),I.a.span(Zn(),(function(e){return e.opacity}))),ct=I.a.p(Vn()),lt=I.a.span(qn()),st=I.a.span(Jn()),ut=I.a.div(Gn()),pt=I.a.div(Wn()),dt=I.a.div(Hn());function mt(){var e=Object(O.a)(["\n  margin: 40px;\n"]);return mt=function(){return e},e}function ft(){var e=Object(O.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, .2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return ft=function(){return e},e}function gt(){var e=Object(O.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return gt=function(){return e},e}var ht=I.a.div(gt()),xt=I.a.p(ft()),bt=I.a.div(mt()),Et=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],s=Object(r.useState)(""),u=Object(l.a)(s,2),p=u[0],d=u[1],m="/create-trip"===e.match.path?"/trips":"/trips/".concat(e.match.params.id);return a.a.createElement(ht,null,p?a.a.createElement(bt,null,a.a.createElement(D,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(pe,{formType:e.formType,formTitle:e.addPhotoToExperience||"Create a new ".concat(e.formType),formSubmit:function(n){d(!0);var t=new FormData;e.tripForm&&(t.append("title",n.title),t.append("imageUrl",n.archive),t.append("isPublic",n.isPublic),t.append("startDate",n.startDate),t.append("endDate",n.endDate),console.log("uploadData",t)),e.addPhotoToExperience&&t.append("imageUrl",n.archive),(e.tripForm?ye(t):e.stepForm?on(n):e.experienceForm?mn(n):En(e.experienceId,t)).then((function(n){d(!1),console.log("New ".concat(e.formType," created !"),n),e.addPhotoToExperience&&e.closeShowAddPhoto(),e.addPhotoToExperience&&e.updateNewPicture(),e.tripForm?e.history.push("/trips"):e.history.push("/trips/".concat(e.tripId))})).catch((function(n){d(!1),console.log("Error while getting ".concat(e.formType," details :"),n),o(n.response.data.message)}))},formState:e.initialState,formInputs:e.formInputs,formButton:e.addPhotoToExperience?"ADD":"CREATE"}),i&&a.a.createElement(xt,null,i),e.addPhotoToExperience||a.a.createElement("p",null,a.a.createElement(c.b,{to:"".concat(m)},a.a.createElement(D,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))},vt=function(e){return a.a.createElement(Et,Object.assign({addPhotoToExperience:!0,formType:"experience photo",formInputs:[{label:"New photo",type:"file",name:"imageUrl"}],initialState:{imageUrl:"",archive:null},tripId:e.match.params.id,experienceId:e.experienceId,closeShowAddPhoto:e.closeShowAddPhoto,handleUpdateNewPicture:e.updateNewPicture},e))},Ot=function(e){var n=Object(r.useState)({loggedInUser:null,experience:[],expanded:!1,showAddPhoto:!1,editingPhotos:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1],s=function(){o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{editingPhotos:!1})}))},u=function(){o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{showAddPhoto:!1})}))},p=Object(r.useCallback)((function(){return hn(i.experience._id).then((function(e){o((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{experience:e})}))})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[i.experience._id]),d=function(e){console.log("Picture with imageId ",e," will be deleted"),vn(i.experience._id,e).then((function(e){console.log("Picture deleted !",e),p()}))},m=i.experience.pictures&&i.experience.pictures.map((function(n,t){return a.a.createElement(dt,{key:t,style:{display:"inline-block"}},a.a.createElement("img",{key:n._id,src:n.url,alt:"experience"}),e.author._id===i.loggedInUser._id&&i.editingPhotos&&a.a.createElement(D,{chosenIcon:"faTrashAlt",color:"red",deleteExperiencePicture:d,picture:n}))}));return Object(r.useEffect)((function(){hn(e.experience._id).then((function(n){console.log("Experience details :",n),o((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{loggedInUser:e.userInSession,experience:n})}))})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[e.userInSession,e.experience._id]),a.a.createElement(rt,null,a.a.createElement(it,{onClick:function(){o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(D,{chosenIcon:"faChevronDown"}):a.a.createElement(D,{chosenIcon:"faChevronRight"}),a.a.createElement("span",null,i.experience.title,i.experience.date&&a.a.createElement(a.a.Fragment,null,(i.experience.showDate||e.author._id===i.loggedInUser._id)&&a.a.createElement(ot,{opacity:i.experience.showDate?"1":"0.4"},a.a.createElement(D,{chosenIcon:"faCalendarAlt",color:"grey"}),i.experience.date,!i.experience.showDate&&" (Hidden for other users)"),(i.experience.showTime||e.author._id===i.loggedInUser._id)&&a.a.createElement(ot,{opacity:i.experience.showTime?"1":"0.4"},a.a.createElement(D,{chosenIcon:"faClock",color:"grey"}),i.experience.time,!i.experience.showTime&&" (Hidden for other users)")))),i.expanded&&a.a.createElement(a.a.Fragment,null,i.experience.description&&a.a.createElement(ct,null,a.a.createElement(D,{chosenIcon:"faCommentDots",color:"grey"}),i.experience.description),i.experience.place&&a.a.createElement(ut,null,a.a.createElement(ue,{experienceMap:!0,address:i.experience.place.address,lat:i.experience.place.lat,lng:i.experience.place.lng,zoom:"15"})),i.experience.pictures&&a.a.createElement(pt,null,m),i.loggedInUser&&e.author._id===i.loggedInUser._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(st,{onClick:function(){!i.editingPhotos&&u(),o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{editingPhotos:!e.editingPhotos})}))}},a.a.createElement(D,{chosenIcon:i.editingPhotos?"faMinusSquare":"faPenSquare",color:"dimgrey"}),i.editingPhotos?"Close":"Edit photos"),a.a.createElement(lt,{onClick:function(){!i.showAddPhoto&&s(),o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{showAddPhoto:!e.showAddPhoto})}))}},a.a.createElement(D,{chosenIcon:i.showAddPhoto?"faMinusSquare":"faPlusSquare",color:"dimgrey"}),i.showAddPhoto?"Close":"Add a photo")),i.showAddPhoto&&a.a.createElement(vt,Object.assign({experienceId:i.experience._id,closeShowAddPhoto:u,updateNewPicture:p},e)),i.loggedInUser&&i.loggedInUser._id===e.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(at,null,a.a.createElement(c.b,{to:"/trips/".concat(i.experience.step.trip,"/steps/").concat(i.experience.step._id,"/edit-experience/").concat(i.experience._id)},a.a.createElement(D,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit experience"))))))};function It(){var e=Object(O.a)(["\n  margin: 20px auto;\n  text-align: left;\n  display: flex;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return It=function(){return e},e}function yt(){var e=Object(O.a)(["\n  margin: 0 auto;\n"]);return yt=function(){return e},e}function wt(){var e=Object(O.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return wt=function(){return e},e}function jt(){var e=Object(O.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return jt=function(){return e},e}function St(){var e=Object(O.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return St=function(){return e},e}function Ut(){var e=Object(O.a)(["\n  @keyframes slide-left {\n    0% {\n      transform: translateX(calc(100% - 5px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  animation: slide-left 0.65s ease-in-out forwards;\n"]);return Ut=function(){return e},e}var kt=I.a.div(Ut()),Pt=I.a.p(St()),Tt=I.a.div(jt()),_t=I.a.ul(wt()),Ct=I.a.div(yt()),Dt=I.a.li(It()),At=function(e){var n=Object(r.useState)({loggedInUser:null,step:[],experiences:[],author:[],expanded:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){ln(e.step._id).then((function(n){console.log("Step details :",n),o((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{loggedInUser:e.userInSession,step:n})})),fn(e.step._id).then((function(e){console.log("Experiences of this step:",e),o((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{experiences:e})}))})).catch((function(e){return console.log("Error while getting experiences :",e)})),je(e.step.trip._id).then((function(e){o((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{author:e.author})}))}))})).catch((function(e){return console.log("Error while getting step details :",e)}))}),[e.userInSession,e.step.trip._id,e.step._id]);var s=i.experiences.map((function(n,t){return a.a.createElement(Dt,{key:n._id},a.a.createElement(Ot,Object.assign({experience:n,experienceNumber:t+1,author:i.author,userInSession:i.loggedInUser},e)))}));return a.a.createElement(kt,null,a.a.createElement(Tt,{onClick:function(){o((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(D,{chosenIcon:"faChevronCircleDown"}):a.a.createElement(D,{chosenIcon:"faChevronCircleRight"}),i.step.title),i.expanded&&a.a.createElement(a.a.Fragment,null,a.a.createElement(_t,null,a.a.createElement(Ct,null,s)),i.loggedInUser&&i.loggedInUser._id===i.step.trip.author&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pt,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(i.step.trip._id,"/steps/").concat(i.step._id,"/add-experience"),state:{trip:i.trip}}},a.a.createElement(D,{chosenIcon:"faAsterisk"}),a.a.createElement("span",null,"Add an experience"))),a.a.createElement(Pt,null,a.a.createElement(c.b,{to:"/trips/".concat(i.step.trip._id,"/edit-step/").concat(i.step._id)},a.a.createElement(D,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit step"))))))},Ft=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],s=Object(r.useState)({loggedInUser:null,trip:[],steps:[],experiences:[],lat:null,lng:null}),u=Object(l.a)(s,2),p=u[0],d=u[1];Object(r.useEffect)((function(){gn(e.match.params.id).then((function(e){var n=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lat}),0).toFixed(2)/e.filter((function(e){return e.place})).length,t=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lng}),0).toFixed(2)/e.filter((function(e){return e.place})).length;console.log("Experiences of this trip:",e),d((function(r){return Object(Y.a)(Object(Y.a)({},r),{},{experiences:e,lat:n,lng:t})}))})).catch((function(e){return console.log("Error while getting experiences :",e)})),je(e.match.params.id).then((function(n){console.log("Trip details :",n),null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{loggedInUser:e.userInSession,trip:n})})),cn(e.match.params.id).then((function(n){console.log("Steps of this trip:",n),d((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{loggedInUser:e.userInSession,steps:n})}))})).catch((function(e){return console.log("Error while getting steps :",e)}))})).catch((function(e){console.log("Error while getting trip details :",e),o("Error : ".concat(e.response.data.message))}))}),[e.userInSession,e.match.params.id]);var m=p.steps.map((function(n,t){return a.a.createElement(Kn,{key:n._id},a.a.createElement(At,Object.assign({step:n,stepNumber:t+1,author:p.trip.author,userInSession:p.loggedInUser},e)))})),f=p.experiences.filter((function(e){return e.place})).map((function(e){return{lat:e.place.lat,lng:e.place.lng}}));return a.a.createElement(Rn,null,i?a.a.createElement(Yn,null,i):p.trip&&p.trip.isPublic||p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,a.a.createElement("h1",null,p.trip.title),p.loggedInUser&&a.a.createElement(He,{trip:p.trip,userInSession:p.loggedInUser,updateUser:e.updateUser})),a.a.createElement(Mn,null,a.a.createElement(D,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,p.trip.duration," days")),p.trip&&p.loggedInUser&&a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement(Je,{trip:p.trip,userInSession:p.loggedInUser,updateTrips:function(){je(e.match.params.id).then((function(n){console.log("Trip details :",n),null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(Y.a)(Object(Y.a)({},t),{},{loggedInUser:e.userInSession,trip:n})}))})).catch((function(e){console.log("Error while getting trip details :",e),o("Error : ".concat(e.response.data.message))}))}}),a.a.createElement("span",null,p.trip.likes.length)),p.trip.author&&a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"20px auto"}},a.a.createElement(Ne,{src:p.trip.author.profilePicture,width:"50px",height:"50px",margin:"5px 15px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By ",p.trip.author.username)),p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id&&!p.trip.isPublic&&a.a.createElement("p",{style:{opacity:"0.4"}},"(PRIVATE TRIP)"),p.experiences&&p.experiences.filter((function(e){return e.place})).length>=1&&a.a.createElement(ue,{tripMap:!0,mapType:"tripPresentation",address:"",lat:1===p.experiences.length?p.experiences[0].place.lat:p.lat,lng:1===p.experiences.length?p.experiences[0].place.lng:p.lng,zoom:"14",allExperiencesCoords:f,hasOnlyOneLocalisation:1===f.length}),p.steps&&a.a.createElement(Bn,null,a.a.createElement(Nn,null,m)),p.loggedInUser&&p.loggedInUser._id===p.trip.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(zn,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(p.trip._id,"/add-step"),state:{trip:p.trip}}},a.a.createElement(D,{chosenIcon:"faPlus"}),a.a.createElement("span",null,"Add a step"))),a.a.createElement(zn,null,a.a.createElement(c.b,{to:{pathname:"/trips/edit/".concat(p.trip._id),state:{trip:p.trip}}},a.a.createElement(D,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit trip")))),a.a.createElement("p",{style:{marginTop:"40px"}},a.a.createElement(c.b,{to:"/trips"},a.a.createElement(D,{chosenIcon:"faArrowCircleLeft",size:"2x"})))):"Sorry, this is a private trip.")},Lt=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){je(e.match.params.id).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting trip details :",e)}))}),[e.match.params.id]);var c=function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")},s=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"},{label:"Do you want to make it public ?",type:"checkbox",value:i.isPublic,checked:i.isPublic,name:"isPublic"},{label:"Image",type:"file",value:"",name:"imageUrl"},{label:"Start date*",type:"date",value:c(i.startDate),name:"startDate"},{label:"End date*",type:"date",value:c(i.endDate),name:"endDate"}];return a.a.createElement(Un,Object.assign({tripForm:!0,formType:"trip",formInputs:s,formTitle:'Edit "'.concat(i.title,'"'),trip:i},e))},Rt=function(e){var n={title:"",trip:e.match.params.id};return a.a.createElement(Et,Object.assign({stepForm:!0,formType:"step",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "First day - London South and East"'}],initialState:n,tripId:e.match.params.id},e))},Mt=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){ln(e.match.params.stepId).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting step details :",e)}))}),[e.match.params.stepId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"}];return a.a.createElement(Un,Object.assign({stepForm:!0,formType:"step",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),step:i},e))},zt=function(e){var n={title:"",date:"",time:"",showDate:!1,showTime:!1,step:e.match.params.stepId,trip:e.match.params.id,description:"",place:null};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Et,Object.assign({experienceForm:!0,formType:"experience",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "Dinner in Camden Town"'},{label:"Date*",type:"date",name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",name:"showDate"},{label:"Time*",type:"time",name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",name:"showTime"},{label:"Description",type:"textarea",name:"description",placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",placeholder:'Ex: "Paris..."'}],initialState:n,tripId:e.match.params.id},e)))},Bt=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){hn(e.match.params.experienceId).then((function(e){o(e)})).catch((function(e){return console.log("Error while getting experience details :",e)}))}),[e.match.params.experienceId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: Dinner at the Eiffel Tower"},{label:"Date*",type:"date",value:function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(i.date),name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",value:i.showDate,checked:i.showDate,name:"showDate"},{label:"Time*",type:"time",value:i.time,name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",value:i.showTime,checked:i.showTime,name:"showTime"},{label:"Description",type:"textarea",name:"description",value:i.description,placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",value:i.place,placeholder:'Ex: "Paris..."'}];return a.a.createElement(Un,Object.assign({experienceForm:!0,formType:"experience",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),experience:i},e))};function Nt(){var e=Object(O.a)(["\n  margin: 0 40px;\n  text-align: center;\n\n  @media (max-width: 767px) {\n    margin: 0 20px;\n  }\n"]);return Nt=function(){return e},e}var Kt=I.a.div(Nt()),Yt=function(e){return a.a.createElement(Et,Object.assign({tripForm:!0,formType:"trip",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:"Ex.: My magical trip to Paris"},{label:"Image",type:"file",name:"imageUrl"},{label:"Do you want to make it public ?",type:"checkbox",name:"isPublic"},{label:"Start Date*",type:"date",name:"startDate"},{label:"End Date*",type:"date",name:"endDate"}],initialState:{title:"",isPublic:!1,startDate:"",endDate:"",imageUrl:"",archive:null}},e))};function Ht(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return Ht=function(){return e},e}var Wt=I.a.span(Ht()),Gt=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],s=i[1];Object(r.useEffect)((function(){s((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var e=Object(R.a)(L.a.mark((function e(){var n,t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:n=e.sent,t=n.filter((function(e){return o.loggedInUser._id===e.author._id})),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var u=a.a.createElement(qe,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser});return a.a.createElement("div",null,a.a.createElement("h1",null,"My Trips"),o.trips.length>0?u:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"You don't have any trip yet !"),a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(P,{formButton:"CREATE A NEW TRIP",width:"250px"}))),o.loggedInUser&&a.a.createElement(Wt,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(D,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE TRIP"))))};function Jt(){var e=Object(O.a)(["\n  @keyframes slide-up {\n    0% {\n      transform: translateY(calc(100% + 10px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateY(0);\n      opacity: 1;\n    }\n  }\n\n  position: fixed;\n  bottom: 50px;\n  right: 90px;\n  animation: slide-up 0.65s ease-in-out forwards;\n\n  border-radius: 20px;\n  background-color: white;\n  padding: 8px;\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.1);\n\n  a{\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n\n    span {\n      margin-top: 5px;\n    }\n  }\n\n  @media (max-width: 767px) {\n    bottom: 30px;\n    right: 30px;\n  }\n"]);return Jt=function(){return e},e}var qt=I.a.span(Jt()),Vt=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],s=i[1];Object(r.useEffect)((function(){s((function(n){return Object(Y.a)(Object(Y.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var e=Object(R.a)(L.a.mark((function e(){var n,t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we();case 2:n=e.sent,t=n.filter((function(e){return-1!==o.loggedInUser.favorites.indexOf(e._id)})),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession]);var u=a.a.createElement(qe,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser});return a.a.createElement("div",null,a.a.createElement("h1",null,"My Favorite Trips"),o.trips.length>0?u:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"You don't have any favorite trip yet !"),a.a.createElement(c.b,{to:"/trips"},a.a.createElement(P,{formButton:"CHECK TRIPS",width:"250px"}))),o.loggedInUser&&a.a.createElement(qt,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(D,{chosenIcon:"faSuitcaseRolling",size:"2x"}),a.a.createElement("span",null,"CREATE TRIP"))))},Zt=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Error 404 not found"))},Xt=function(){var e={loggedInUser:JSON.parse(localStorage.getItem("loggedInUser"))||null},n=Object(r.useState)(e),t=Object(l.a)(n,2),i=t[0],o=t[1],c=function(e){o({loggedInUser:e})};Object(r.useEffect)((function(){null===i.loggedInUser&&g().then((function(e){localStorage.setItem("loggedInUser",JSON.stringify(e)),o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))}),[i.loggedInUser]);var u=function(){g().then((function(e){o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))};return a.a.createElement(Kt,null,a.a.createElement(A,{userInSession:i.loggedInUser,getUser:c}),a.a.createElement(s.d,null,a.a.createElement(s.b,{exact:!0,path:"/",render:function(e){return a.a.createElement(N,Object.assign({},e,{userInSession:i.loggedInUser}))}}),a.a.createElement(s.b,{exact:!0,path:"/trips",render:function(e){return a.a.createElement(Xe,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:u}))}}),a.a.createElement(s.b,{exact:!0,path:"/search",render:function(e){return a.a.createElement($e,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:u}))}}),a.a.createElement(s.b,{exact:!0,path:"/trips/:id",render:function(e){return a.a.createElement(Ft,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:u}))}}),a.a.createElement(en,{exact:!0,path:"/trips/edit/:id",userInSession:i.loggedInUser,component:Lt}),a.a.createElement(en,{exact:!0,path:"/trips/:id/add-step",userInSession:i.loggedInUser,component:Rt}),a.a.createElement(en,{exact:!0,path:"/trips/:id/edit-step/:stepId",userInSession:i.loggedInUser,component:Mt}),a.a.createElement(en,{exact:!0,path:"/trips/:id/steps/:stepId/add-experience",userInSession:i.loggedInUser,component:zt}),a.a.createElement(en,{exact:!0,path:"/trips/:id/steps/:stepId/edit-experience/:experienceId",userInSession:i.loggedInUser,component:Bt}),a.a.createElement(s.b,{exact:!0,path:"/signup",render:function(e){return a.a.createElement(Ee,Object.assign({},e,{getUser:c}))}}),a.a.createElement(s.b,{exact:!0,path:"/login",render:function(e){return a.a.createElement(ve,Object.assign({},e,{getUser:c}))}}),a.a.createElement(en,{exact:!0,path:"/profile",userInSession:i.loggedInUser,component:Pn}),a.a.createElement(en,{exact:!0,path:"/profile/my-trips",userInSession:i.loggedInUser,component:Gt,updateUser:u}),a.a.createElement(en,{exact:!0,path:"/profile/favorite-trips",userInSession:i.loggedInUser,component:Vt,updateUser:u}),a.a.createElement(en,{exact:!0,path:"/create-trip",userInSession:i.loggedInUser,component:Yt}),a.a.createElement(s.b,{component:Zt})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(Xt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.b5e5c8fb.chunk.js.map