(this["webpackJsonpsupertrips-frontend"]=this["webpackJsonpsupertrips-frontend"]||[]).push([[0],{53:function(e,n,t){e.exports=t(87)},58:function(e,n,t){},87:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),i=t(16),o=t.n(i),c=t(6),l=(t(58),t(5)),u=t(8),s=t(17),p=t.n(s),d=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),m=function(e){throw e},f=function(e){return d.get("/getUser/".concat(e)).then((function(e){return e.data})).catch(m)},g=function(e){return d.post("/signup",e).then((function(e){return e.data})).catch(m)},h=function(){return d.get("/loggedIn").then((function(e){return e.data}))},x=function(e){return d.post("/login",e).then((function(e){return e.data}))},b=function(){return localStorage.removeItem("loggedInUser"),d.post("/logout",{}).then((function(e){return e.data}))},E=function(e,n){return d.put("/profile/profilePicture",n).then((function(e){return e.data})).catch(m)},v=function(e){return d.put("/toggleAddToFavorites/".concat(e)).then((function(e){return e.data})).catch(m)},w=function(e){return d.post("/auth/facebook",e).then((function(e){return e.data})).catch(m)},y=t(1),I=t(2);function O(){var e=Object(y.a)(["\n  padding-top: 6px;\n\n  @media (max-width: 576px) {\n    width: 125px;\n    margin: 10px 10px 10px 0;\n  }\n\n  @media (min-width: 576px) and (max-width: 767px) {\n    width: 150px;\n    margin: 15px 15px 15px 0;\n  }\n\n  @media (min-width: 767px) and (max-width: 992px) {\n    width: 175px;\n    margin: 15px 15px 15px 0;\n  }\n\n  @media (min-width: 992px) {\n    width: 200px;\n    margin: 25px 25px 25px 0;\n  }\n"]);return O=function(){return e},e}function j(){var e=Object(y.a)(["\n  @media (max-width: 767px) {\n    display: ",";\n    flex-direction: column;\n    list-style-type: none;\n    top: 65px;\n    right: 0px;\n    padding-left: 0;\n    width: 200px;\n    position: absolute;\n    z-index: 2;\n    height: fit-content;\n    background-color: rgba(255, 255, 255, 0.8);\n    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\n    animation-name: menu-transition;\n    animation-duration: 0.3s;\n    font-size: 12px;\n\n    li {\n      list-style-type: none;\n      display: flex;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    li:first-of-type {\n      margin: 30px auto 10px;\n    }\n\n    li:nth-of-type(2) {\n      margin: 30px auto 10px;\n    }\n\n    li:nth-of-type(3) {\n      margin: ",";\n    }\n  }\n\n  @media (max-width: 576px) {\n    top: 48px;\n  }\n\n  @media (min-width: 576) and (max-width: 768px) {\n    top: 72px;\n  }\n\n  @media (min-width: 767px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    list-style-type: none;\n    padding: 0;\n    width: 100%;\n\n    li {\n      margin: ",";\n      font-weight: 400;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    li:first-of-type {\n      margin: auto auto auto 20px;\n    }\n\n    li:nth-of-type(2) {\n      margin-right: 30px;\n    }\n  }\n\n  @media (min-width: 992px) {\n    li {\n      padding-top: 6px;\n\n      a {\n        font-size: 18px;\n      }\n    }\n\n    li:nth-of-type(2) {\n      margin-right: 50px;\n    }\n  }\n"]);return j=function(){return e},e}function S(){var e=Object(y.a)(["\n  @keyframes menu-transition {\n    from {\n      opacity: 0;\n    }\n    to {\n      opacity: 1;\n    }\n  }\n\n  padding: 0;\n  border-bottom: 1px solid lightgrey;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0;\n  margin: 0 40px;\n\n  @media (max-width: 768px) {\n    justify-content: space-between;\n    margin: 0 20px;\n  }\n\n  h3 {\n    padding-bottom: 2px;\n\n    a {\n      text-decoration: none;\n    }\n  }\n\n  span {\n    align-self: center;\n\n    &:hover {\n      cursor: pointer;\n    }\n\n    @media (min-width: 767px) {\n      display: none;\n    }\n  }\n"]);return S=function(){return e},e}var T=I.a.div(S()),k=I.a.ul(j(),(function(e){return e.showDropdown}),(function(e){return e.userInSession?"15px auto 15px":"30px auto"}),(function(e){return e.margin||"auto 10px auto 10px"})),U=I.a.img(O());function P(){var e=Object(y.a)(["\n  padding: 14px 20px 12px;\n  margin: 8px;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  background-color: ",";\n  color: ",";\n  width: ",";\n\n  &:hover {\n    cursor: pointer;\n    background-color: lightsteelblue;\n  }\n"]);return P=function(){return e},e}var _=I.a.input(P(),(function(e){return e.theme}),(function(e){return e.color}),(function(e){return e.width}));_.defaultProps={theme:"white",color:"black"};var C=function(e){return a.a.createElement(_,{type:"submit",value:e.formButton,onClick:function(){e.toggleDeleteConfirmation&&e.toggleDeleteConfirmation(),e.closeDeleteConfirmation&&e.closeDeleteConfirmation(),e.deleteItem&&e.deleteItem(),e.toggleProfilePictureForm&&e.toggleProfilePictureForm(),e.logoutUser&&e.logoutUser()},theme:e.theme,color:e.color,width:e.width})},F=t(44),D=t(7),A=t(45),L=function(e){var n;switch(e.chosenIcon){case"faHourglassHalf":n=D.n;break;case"faFeatherAlt":n=D.l;break;case"faPlus":n=D.q;break;case"faAsterisk":n=D.b;break;case"faChevronCircleRight":n=D.f;break;case"faChevronCircleDown":n=D.e;break;case"faTimes":n=D.u;break;case"faBars":n=D.c;break;case"faSpinner":n=D.s;break;case"faChevronRight":n=D.h;break;case"faChevronDown":n=D.g;break;case"faArrowCircleLeft":n=D.a;break;case"faClock":n=D.i;break;case"faCalendarAlt":n=D.d;break;case"faPlusSquare":n=D.r;break;case"faMinusSquare":n=D.o;break;case"faCommentDots":n=D.k;break;case"faHeart":n=D.m;break;case"faTrashAlt":n=D.v;break;case"faPenSquare":n=D.p;break;case"faThumbsUp":n=D.t;break;case"faFacebook":n=A.a;break;case"faCommentAlt":n=D.j;break;default:n=null}return a.a.createElement(F.a,{icon:n,size:e.size,color:e.color,onMouseEnter:e.handleMouseEnter,onMouseLeave:e.handleMouseLeave,onClick:function(){e.toggleDropdown&&e.toggleDropdown(),e.toggleAddToFavorites&&e.toggleAddToFavorites(e.trip._id),e.deleteExperiencePicture&&e.deleteExperiencePicture(e.picture._id),e.toggleLikeTrip&&e.userInSession&&!e.tripDescription&&e.toggleLikeTrip(e.trip._id)}})},M=function(e){var n=Object(r.useState)({loggedInUser:null}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useState)("grey"),f=Object(l.a)(m,2),g=f[0],h=f[1],x=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),E=Object(l.a)(x,2),v=E[0],w=E[1];Object(r.useEffect)((function(){window.addEventListener("resize",(function(){return w({width:window.innerWidth,height:window.innerHeight})})),v.width>=767&&y(),o({loggedInUser:e.userInSession})}),[e.userInSession,v.width]);var y=function(){d(!1)},I=function(){h("grey"===g?"black":"grey")};return a.a.createElement(T,null,a.a.createElement(c.b,{to:"/",onClick:y},a.a.createElement(U,{src:"/supertrips_logo_blue.png",alt:"Supertrips"})),a.a.createElement("span",null,a.a.createElement(L,{chosenIcon:p?"faTimes":"faBars",size:"lg",color:g,handleMouseEnter:I,handleMouseLeave:I,toggleDropdown:function(){d(!p)}})),a.a.createElement(k,{userInSession:e.userInSession,showDropdown:p?"flex":"none"},a.a.createElement("li",null,a.a.createElement(c.b,{to:"/trips",onClick:y},"TRIPS")),i.loggedInUser?a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/profile",onClick:y},"PROFILE")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/",onClick:y},a.a.createElement(C,{logoutUser:function(){b().then((function(){o({loggedInUser:null}),e.getUser(null)}))},formButton:"LOGOUT"})))):a.a.createElement(a.a.Fragment,null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/signup",onClick:y},"SIGNUP")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/login",onClick:y},"LOGIN")))))},R=t(10),z=t.n(R),B=t(4),N=t(15);function H(){var e=Object(y.a)(["\n  padding: 12px 20px;\n  border: 1px solid lightgrey;\n  margin: 8px 0 24px;\n  font-size: 17px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  width: 500px;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n\n  @media (min-width: 992px) {\n    width: 700px;\n  }\n"]);return H=function(){return e},e}var G=I.a.input(H()),W=function(e){return a.a.createElement(G,{type:"text",placeholder:e.placeholder,onChange:function(n){var t=n.target.value;e.searchUpdates(t)}})},q=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),Y=function(e){throw e},J=function(e){return q.post("/newTrip",e).then((function(e){return e.data})).catch(Y)},K=function(){return q.get("/trips").then((function(e){return e.data})).catch(Y)},V=function(){return q.get("/popularTrips").then((function(e){return e.data})).catch(Y)},X=function(e){return q.get("/trips/".concat(e)).then((function(e){return e.data})).catch(Y)},Z=function(e,n){return q.put("/trips/".concat(e),n).then((function(e){return e.data})).catch(Y)},$=function(e){return q.delete("/trips/".concat(e)).then((function(e){return e.data})).catch(Y)},Q=function(e){return q.put("/trip/toggleLikes/".concat(e)).then((function(e){return e.data})).catch(Y)},ee=function(e,n){return q.post("/trip/postComment/".concat(e),n).then((function(e){return e.data})).catch(Y)};function ne(){var e=Object(y.a)(["\n  position: relative;\n  img {\n    width: 100%;\n    height: auto;\n  }\n\n  h2 {\n    position: absolute;\n    height: 50px;\n    width: 300px;\n    left: 50%;\n    margin-left: -150px;\n    top: 20%;\n    margin-top: -20px;\n    color: darkslategrey;\n    font-size: 30px;\n    background-color: rgba(176, 196, 222, 0.5);\n    padding-top: 10px;\n    border-radius: 4px;\n\n    @media (max-width: 768px) {\n      font-size: 24px;\n      padding-top: 15px;\n    }\n\n    @media (min-width: 992px) {\n      font-size: 40px;\n      padding: 20px 5px;\n    }\n  }\n\n  input {\n    position: absolute;\n    height: 50px;\n    width: 500px;\n    left: 50%;\n    margin-left: -250px;\n    top: 50%;\n    margin-top: -30px;\n\n    @media (max-width: 768px) {\n      width: 300px;\n      margin-left: -150px;\n    }\n\n    @media (min-width: 992px) {\n      width: 700px;\n      margin-left: -350px;\n    }\n  }\n"]);return ne=function(){return e},e}function te(){var e=Object(y.a)(["\n  padding: 0;\n\n  h2 {\n    text-align: left;\n    padding-left: 40px;\n    margin-bottom: 0;\n  }\n"]);return te=function(){return e},e}function re(){var e=Object(y.a)(["\n  position: relative;\n\n  h2 {\n    color: rgba(255, 255, 255, 0.8);\n  }\n\n  h2:first-of-type {\n    position: absolute;\n    left: 5%;\n    top: 2%;\n    font-size: 4vw;\n  }\n\n  h2:nth-of-type(2) {\n    position: absolute;\n    right: 5%;\n    bottom: 2%;\n    font-size: 4vw;\n  }\n\n  video {\n    width: 100%;\n  }\n\n  form {\n    position: absolute;\n    height: 100px;\n    width: 500px;\n    left: 50%;\n    margin-left: -250px;\n    top: 50%;\n    margin-top: -50px;\n\n    @media (max-width: 768px) {\n      width: 300px;\n      margin-left: -150px;\n    }\n\n    @media (min-width: 992px) {\n      width: 700px;\n      margin-left: -350px;\n    }\n  }\n"]);return re=function(){return e},e}var ae=I.a.div(re()),ie=I.a.ul(te()),oe=I.a.div(ne());function ce(){var e=Object(y.a)(["\n  width: 100%;\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    align-items: center;\n    align-content: center;\n    ","\n  }\n\n  div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    align-content: center;\n    margin: 15px 0;\n    ","\n\n    @media (max-width: 767px) {\n      margin: 2px 0;\n    }\n  }\n\n  div:nth-of-type(1) {\n    svg {\n      margin-right: 18px;\n      ","\n    }\n  }\n\n  div:nth-of-type(2) {\n    span {\n      margin-right: 5px;\n\n      svg {\n        ","\n      }\n    }\n  }\n\n  div:nth-of-type(3) {\n    div {\n      margin: 0 10px 0 0;\n    }\n  }\n\n  a {\n    display: inline-block;\n  }\n"]);return ce=function(){return e},e}function le(){var e=Object(y.a)(["\n  margin: 0 auto;\n\n  h3 {\n    display: inline-block;\n\n    @media (min-width: 992px) {\n      font-size: 26px;\n    }\n  }\n\n  span {\n    margin-left: 10px;\n  }\n"]);return le=function(){return e},e}function ue(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  align-items: flex-start;\n  ","\n\n  @media (max-width: 767px) {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    align-items: center;\n  }\n"]);return ue=function(){return e},e}function se(){var e=Object(y.a)(["\n  position: relative;\n  text-align: center;\n\n  a {\n    img {\n      @keyframes slow-popup {\n        0% {\n          opacity: 0;\n        }\n        100% {\n          opacity: 1;\n        }\n      }\n\n      height: auto;\n      max-width: 400px;\n      margin-right: 40px;\n      animation: slow-popup 0.5s ease-in-out forwards;\n\n      @media (max-width: 767px) {\n        margin-right: 0;\n        max-height: 250px;\n        width: 100%;\n        object-fit: scale-down;\n        ","\n      }\n\n      @media (min-width: 767px) and (max-width: 991px) {\n        height: auto;\n        width: 300px;\n        max-height: 200px;\n        object-fit: scale-down;\n        ","\n      }\n\n      @media (min-width: 992px) {\n        height: auto;\n        width: 400px;\n        max-height: 300px;\n        margin-right: 40px;\n        object-fit: scale-down;\n        ","\n      }\n    }\n  }\n\n  svg {\n    position: absolute;\n    bottom: 20px;\n    width: 30px;\n    left: 50%;\n    margin-left: -15px;\n    background-color: rgba(255, 255, 255, 0.6);\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 25%;\n    padding: 10px;\n\n    @media (min-width: 768px) {\n      margin-left: -40px;\n    }\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return se=function(){return e},e}function pe(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  ","\n\n  @media (max-width: 768px) {\n    display: flex;\n    flex-direction: column;\n  }\n"]);return pe=function(){return e},e}function de(){var e=Object(y.a)(["\n  margin: 40px 0;\n  text-align: left;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  ","\n\n  @media (max-width: 767px) {\n    justify-content: center;\n  }\n\n  svg {\n    margin: 0 10px 0 0;\n    padding-top: 4px;\n  }\n\n  a {\n    text-decoration: none;\n  }\n"]);return de=function(){return e},e}function me(){var e=Object(y.a)(["\n  margin: 0 auto;\n  ","\n"]);return me=function(){return e},e}function fe(){var e=Object(y.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return fe=function(){return e},e}var ge=I.a.ul(fe()),he=I.a.div(me(),(function(e){return e.popularTrips&&"display: flex; flex-direction: row; width: 100%; align-items: flex-start; overflow-x: scroll"})),xe=I.a.li(de(),(function(e){return e.popularTrips&&"margin: 40px;"})),be=I.a.div(pe(),(function(e){return e.popularTrips&&"display: flex; flex-direction: column; align-items: flex-start;"})),Ee=I.a.div(se(),(function(e){return e.popularTrips&&"height: 150px; width: auto;"}),(function(e){return e.popularTrips&&"height: 200px; width: auto;"}),(function(e){return e.popularTrips&&"height: 230px; width: auto;"})),ve=I.a.div(ue(),(function(e){return e.popularTrips&&"justify-content: flex-start; align-items: flex-start"})),we=I.a.span(le()),ye=I.a.div(ce(),(function(e){return e.popularTrips&&"flex-direction: column; flex-start; align-items: flex-start"}),(function(e){return!e.popularTrips&&"margin: 10px 0"}),(function(e){return!e.popularTrips&&"padding: 0"}),(function(e){return!e.popularTrips&&"padding: 0"}));function Ie(){var e=Object(y.a)(["\n  display: ",";\n  align-self: ",";\n  width: ",";\n  height: ",";\n  margin: ",";\n  background-image: url(",");\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  border-radius: 50%;\n"]);return Ie=function(){return e},e}var Oe=I.a.div(Ie(),(function(e){return e.display||"block"}),(function(e){return e.alignSelf}),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.margin}),(function(e){return e.src})),je=function(e){return a.a.createElement(Oe,{src:e.src,width:e.width,height:e.height,margin:e.margin,display:e.display})};function Se(){var e=Object(y.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return Se=function(){return e},e}var Te=I.a.span(Se()),ke=function(e){var n={loggedInUser:e.userInSession},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=i[1],u=Object(r.useCallback)((function(){return h().then((function(e){c({loggedInUser:e})})).catch((function(){return console.log("Error adding/removing to/from favorite trips")}))}),[]);return a.a.createElement(Te,null,a.a.createElement(L,{chosenIcon:"faHeart",color:-1!==o.loggedInUser.favorites.indexOf(e.trip._id)?"red":"grey",toggleAddToFavorites:function(n){v(n).then((function(){u(),e.updateUser()})).catch((function(){return console.log("An error occurred while adding/removing to/from favorites")}))},trip:e.trip}))};function Ue(){var e=Object(y.a)(["\n  &:hover {\n    ","\n  }\n"]);return Ue=function(){return e},e}var Pe=I.a.span(Ue(),(function(e){return e.userInSession&&!e.tripDescription?"cursor: pointer":""})),_e=function(e){return a.a.createElement(Pe,{userInSession:e.userInSession,tripDescription:e.tripDescription},a.a.createElement(L,{tripDescription:e.tripDescription,chosenIcon:"faThumbsUp",color:e.tripDescription?"grey":-1!==e.trip.likes.indexOf(e.userInSession._id)?"royalblue":"grey",toggleLikeTrip:function(n){Q(n).then((function(){e.updateTrips()})).catch((function(){return console.log("Error adding/removing Like to/from this trip")}))},trip:e.trip,size:"1x",userInSession:e.userInSession}))},Ce=function(e){var n=e.trips.map((function(n){return a.a.createElement(xe,{key:n._id,popularTrips:e.popularTrips},a.a.createElement(be,{popularTrips:e.popularTrips},a.a.createElement(Ee,{popularTrips:e.popularTrips},a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},n.imageUrl&&a.a.createElement("img",{src:n.imageUrl,alt:"trip cover pic"})),e.userInSession&&!e.popularTrips&&a.a.createElement(_e,{trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips})),a.a.createElement(ve,{popularTrips:e.popularTrips},a.a.createElement(we,{popularTrips:e.popularTrips},a.a.createElement(c.b,{to:{pathname:"/trips/".concat(n._id),state:{userInSession:e.loggedInUser,trip:n}}},a.a.createElement("h3",null,n.title)),e.userInSession&&!e.popularTrips&&a.a.createElement(ke,{trip:n,userInSession:e.userInSession,updateUser:e.updateUser})),a.a.createElement(ye,{popularTrips:e.popularTrips},a.a.createElement("div",null,a.a.createElement(L,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,n.duration," days")),a.a.createElement("div",null,a.a.createElement(_e,{tripDescription:!0,trip:n,userInSession:e.userInSession,updateTrips:e.updateTrips}),a.a.createElement("span",null,n.likes.length)),a.a.createElement("div",null,a.a.createElement(je,{src:n.author.profilePicture,width:"20px",height:"20px",margin:"5px 10px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By"," ",a.a.createElement(c.b,{to:e.userInSession&&e.userInSession._id===n.author._id?"/profile":"/profile/user/".concat(n.author._id)},n.author.username)))))))}));return a.a.createElement(ge,null,a.a.createElement(he,{popularTrips:e.popularTrips},n))},Fe=function(e){var n=Object(r.useState)({loggedInUser:e.userInSession}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)({search:""}),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useState)({trips:[]}),f=Object(l.a)(m,2),g=f[0],h=f[1];Object(r.useEffect)((function(){o({loggedInUser:e.userInSession}),function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V();case 2:t=n.sent,r=t.filter((function(n){return n.isPublic||n.author._id===e.userInSession})),h((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[e.userInSession]);var x=a.a.createElement(Ce,{popularTrips:!0,trips:g.trips,userInSession:i.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:n=e.sent,t=n,h((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:t})}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}}),b=function(){var e=Object(N.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d({search:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(ae,null,a.a.createElement("h2",null,"Share your experiences..."),a.a.createElement("video",{autoPlay:!0,loop:!0,muted:!0},a.a.createElement("source",{src:"https://res.cloudinary.com/nutriapp/video/upload/v1599923299/jumbotron_video_nz_nkqmp2.mp4",type:"video/mp4"})),a.a.createElement("h2",null,"...and get inspired"),a.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.history.push("/search?title=".concat(p.search))}},a.a.createElement(W,{placeholder:"Search for a trip..",searchUpdates:b}),a.a.createElement(C,{formButton:"GO"}))),g.trips&&a.a.createElement(ie,null,a.a.createElement("h2",{style:{textAlign:"left"}},"Most Popular trips"),x),a.a.createElement(oe,null,a.a.createElement("h2",null,"Create a trip"),a.a.createElement("img",{src:"https://res.cloudinary.com/nutriapp/image/upload/v1599217458/tripDefault_gkayed.jpg",alt:"Create a trip"}),a.a.createElement(c.b,{to:e.userInSession?"/create-trip":"/login"},a.a.createElement(C,{formButton:e.userInSession?"START":"LOGIN FIRST"}))))},De=t(23);function Ae(){var e=Object(y.a)(["\n  width: 100%;\n  height: 100px;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  resize: none;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return Ae=function(){return e},e}function Le(){var e=Object(y.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return Le=function(){return e},e}function Me(){var e=Object(y.a)(["\n  border-radius: 5px;\n  background-color: #f2f2f2;\n  padding: 20px;\n  margin: 20px auto;\n  max-width: 350px;\n"]);return Me=function(){return e},e}var Re=I.a.form(Me()),ze=I.a.input(Le()),Be=I.a.textarea(Ae()),Ne=t(46),He=t(47),Ge=t(52),We=t(50),qe=t(25),Ye=t.n(qe);function Je(){var e=Object(y.a)(["\n  width: 100%;\n  padding: 8px 20px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return Je=function(){return e},e}function Ke(){var e=Object(y.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n\n  &.btn {\n    &:hover {\n      cursor: pointer;\n      background-color: lightsteelblue;\n    }\n  }\n"]);return Ke=function(){return e},e}var Ve=I.a.input(Ke()),Xe=I.a.div(Je()),Ze=function(e){Object(Ge.a)(t,e);var n=Object(We.a)(t);function t(e){var r;return Object(Ne.a)(this,t),(r=n.call(this,e)).handleChange=function(e){r.setState({address:e})},r.handleSelect=function(e){Object(qe.geocodeByAddress)(e).then((function(e){return Object(qe.getLatLng)(e[0])})).then((function(n){r.setState(Object(B.a)({address:e},n)),r.props.setPlace(r.state)})).catch((function(e){return console.error("Error",e)}))},r.state={address:""},r}return Object(He.a)(t,[{key:"render",value:function(){return a.a.createElement(Ye.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},(function(e){var n=e.getInputProps,t=e.suggestions,r=e.getSuggestionItemProps,i=e.loading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve,n({placeholder:"Search Places ...",className:"location-search-input"})),a.a.createElement("div",{className:"autocomplete-dropdown-container"},i&&a.a.createElement(L,{chosenIcon:"faSpinner",size:"2x"}),t.map((function(e){var n=e.active?"suggestion-item--active":"suggestion-item",t=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return a.a.createElement(Xe,Object.assign({},r(e,{className:n,style:t}),{key:e.index}),a.a.createElement("span",null,e.description))}))))}))}}]),t}(a.a.Component),$e=t(48);function Qe(){var e=Object(y.a)(["\n  ",";\n\n  @media (max-width: 600px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 576px) and (max-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 667px) {\n    ",";\n    ",";\n  }\n\n  @media (min-width: 992px) {\n    ",";\n    ",";\n  }\n"]);return Qe=function(){return e},e}var en=I.a.div(Qe(),(function(e){return e.formMap&&"box-sizing: border-box; height: 200px; border-radius: 4px;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 300px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 200px;"}),(function(e){return e.experienceMap&&"width: 450px; height: 200px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 300px;"}),(function(e){return e.experienceMap&&"width: 600px; height: 250px; margin: 0 auto;"}),(function(e){return e.tripMap&&"width: 100%; height: 400px;"}),(function(e){return e.experienceMap&&"width: 800px; height: 300px; margin: 0 auto;"})),nn=function(e){var n={name:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng),zoom:e.zoom},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],c=(i[1],{lat:o.lat,lng:o.lng}),u=parseInt(o.zoom),s=function(e,n,t){var r=function(e,n,t){var r=new n.LatLngBounds;return t.forEach((function(e){r.extend(new n.LatLng(e.lat,e.lng))})),r}(0,n,t);e.fitBounds(r),function(e,n,t){n.event.addDomListenerOnce(e,"idle",(function(){n.event.addDomListener(window,"resize",(function(){e.fitBounds(t)}))}))}(e,n,r)};return a.a.createElement(en,{tripMap:e.tripMap,experienceMap:e.experienceMap,formMap:e.formMap},a.a.createElement($e.a,{key:o.name,bootstrapURLKeys:{key:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_URL:"https://supertrips.herokuapp.com",REACT_APP_FACEBOOK_APP_ID:"651873985443420",REACT_APP_GOOGLE_MAPS_KEY:"AIzaSyC5R2OYlhvGRMmpofdkJ0jL60Tsa7dtZUY"}).GOOGLE_MAPS_KEY)},defaultCenter:c,defaultZoom:u,options:function(e){return{disableDefaultUI:!1,mapTypeControl:!0,streetViewControl:!0,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]}]}},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(n){var t=n.map,r=n.maps;e.tripMap&&!e.hasOnlyOneLocalisation&&s(t,r,e.allExperiencesCoords),function(n,t){if("tripPresentation"===e.mapType)e.allExperiencesCoords.forEach((function(e){new t.Marker({position:e,map:n})}));else{var r={lat:o.lat,lng:o.lng};new t.Marker({position:r,map:n})}}(t,r)}}))},tn=function(e){var n=Object(r.useState)(e.formState),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){o((function(n){return e.formState}))}),[e.formState]);var c=function(e){var n=e.target,t=n.name,r=n.value,a=n.type,i=n.checked,c=n.files;o("imageUrl"===t||"profilePicture"===t?function(e){return Object(B.a)(Object(B.a)({},e),{},{archive:c[0]})}:function(e){return Object(B.a)(Object(B.a)({},e),{},Object(De.a)({},t,"checkbox"===a?i:"date"===a?function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(r):"file"===a?c[0]:r))})},u=function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{place:{address:e.address,lat:parseFloat(e.lat),lng:parseFloat(e.lng)}})}))},s=e.formInputs.map((function(e){return"textarea"===e.type?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(Be,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c})):"place"===e.name?a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(Ze,{setPlace:u}),i.place&&a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Is this the correct place ?"),a.a.createElement(nn,{formMap:!0,key:i.place.address,address:i.place.address,lat:i.place.lat,lng:i.place.lng,zoom:"14"}))):a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement("label",null,e.label),a.a.createElement(ze,{type:e.type,name:e.name,checked:i[e.name]||!1,value:i[e.name]||"",placeholder:e.placeholder,onChange:c}))}));return a.a.createElement("div",null,a.a.createElement(Re,{onSubmit:function(n){return function(n,t){n.preventDefault(),e.formSubmit(t)}(n,i)}},a.a.createElement("h3",null,e.formTitle),s,e.auth||"experience photo"===e.formType||e.comment||a.a.createElement("p",null,"*required"),a.a.createElement(C,{formButton:e.formButton})))};function rn(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  flex-wrap: wrap;\n  margin: 50px;\n\n  svg {\n    margin: 0 20px 0 0;\n  }\n\n  @media (max-width: 667px) {\n    flex-direction: column;\n\n    svg {\n      margin: 20px;\n    }\n  }\n"]);return rn=function(){return e},e}function an(){var e=Object(y.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, 0.2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return an=function(){return e},e}var on=I.a.p(an()),cn=I.a.p(rn()),ln=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1];return a.a.createElement("div",null,a.a.createElement(tn,{auth:!0,formSubmit:function(n){(e.login?x(n):g(n)).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(e){console.log("Error while login/signup"),o(e.response.data.message)}))},formState:{username:"",password:""},formInputs:[{label:"Username",type:"text",name:"username",placeholder:"Enter your username"},{label:"Password",type:"password",name:"password",placeholder:"*******"}],formButton:e.formButton}),a.a.createElement("p",null,e.authMessage,a.a.createElement(c.b,{to:"".concat(e.formRedirectLink)},e.formRedirectText)),i&&a.a.createElement(on,null,i))},un=t(24),sn=t.n(un),pn=function(e){return a.a.createElement("div",null,a.a.createElement(ln,Object.assign({},e,{signup:!0,getUser:e.getUser,formButton:"SIGN-UP",authMessage:"Already have an account ?",formRedirectLink:"/login",formRedirectText:" Login"})),a.a.createElement(cn,null,a.a.createElement(L,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(sn.a,{style:{display:"block"},appId:"".concat("651873985443420"),autoLoad:!1,isMobile:!1,reauthenticate:!0,fields:"name,email,picture",callback:function(n){w({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(){return console.log("Error while login with Facebook")}))}})))},dn=function(e){return a.a.createElement("div",null,a.a.createElement(ln,Object.assign({},e,{login:!0,getUser:e.getUser,formButton:"LOGIN",authMessage:"Don't have any account yet ?",formRedirectLink:"/signup",formRedirectText:" Sign-up"})),a.a.createElement(cn,null,a.a.createElement(L,{chosenIcon:"faFacebook",size:"3x",color:"#4c69ba"}),a.a.createElement(sn.a,{style:{display:"block"},appId:"".concat("651873985443420"),autoLoad:!1,isMobile:!1,reauthenticate:!0,fields:"name,email,picture",callback:function(n){w({access_token:n.accessToken}).then((function(n){localStorage.setItem("loggedInUser",JSON.stringify(n)),e.getUser(n),e.history.push("/")})).catch((function(){return console.log("Error while login with Facebook")}))}})))};function mn(){var e=Object(y.a)(["\n  margin: 0 20px;\n\n  ul {\n    ","\n    ","\n  }\n"]);return mn=function(){return e},e}var fn=I.a.div(mn(),(function(e){return e.searchTrips&&"padding: 0;"}),(function(e){return e.myFavoriteTrips&&"padding: 0;"})),gn=function(e){var n={loggedInUser:e.userInSession,trips:[]},t=Object(r.useState)(n),i=Object(l.a)(t,2),o=i[0],u=i[1],s=e.searchTrips&&new URLSearchParams(e.location.search).get("title")||"";Object(r.useEffect)((function(){u((function(n){return Object(B.a)(Object(B.a)({},n),{},{loggedInUser:e.userInSession})})),function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=e.allTrips?t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})):e.myTrips?t.filter((function(e){return o.loggedInUser._id===e.author._id})):e.myFavoriteTrips?t.filter((function(e){return-1!==o.loggedInUser.favorites.indexOf(e._id)})):t.filter((function(n){return(e.userInSession&&n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(s.toUpperCase())})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[o.loggedInUser,e.userInSession,e.allTrips,e.myFavoriteTrips,e.myTrips,e.searchTrips,s]);var p=function(){var n=Object(N.a)(z.a.mark((function n(t){var r,a;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:r=n.sent,a=r.filter((function(n){return(n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(t.toUpperCase())})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:a})}));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),d=a.a.createElement(Ce,{trips:o.trips,userInSession:o.loggedInUser,updateUser:e.updateUser,updateTrips:function(){(function(){var n=Object(N.a)(z.a.mark((function n(){var t,r;return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K();case 2:t=n.sent,r=e.allTrips?t.filter((function(n){return o.loggedInUser&&n.author._id===e.userInSession._id||n.isPublic})):e.myTrips?t.filter((function(e){return o.loggedInUser._id===e.author._id})):e.myFavoriteTrips?t.filter((function(e){return-1!==o.loggedInUser.favorites.indexOf(e._id)})):t.filter((function(n){return(e.userInSession&&n.author._id===e.userInSession._id||n.isPublic)&&n.title.toUpperCase().includes(s.toUpperCase())})),u((function(e){return Object(B.a)(Object(B.a)({},e),{},{trips:r})}));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}}),m=o.trips&&o.trips.length;return a.a.createElement(fn,{allTrips:e.allTrips,searchTrips:e.searchTrips,myFavoriteTrips:e.myFavoriteTrips},a.a.createElement("h1",null,e.searchTrips?'Search results for: "'.concat(s,'"'):e.title),e.allTrips&&a.a.createElement(W,{placeholder:"Search for a trip..",searchUpdates:p}),e.allTrips&&e.userInSession&&a.a.createElement("p",null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"}))),e.myTrips||e.myFavoriteTrips?o.trips.length>0?e.myTrips?a.a.createElement(a.a.Fragment,null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"})),d):a.a.createElement("ul",null,d):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,e.myTrips?"You don't have any trip yet !":"You don't have any favorite trip yet !"),e.myTrips?a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"})):a.a.createElement(c.b,{to:"/trips"},a.a.createElement(C,{formButton:"CHECK TRIPS",width:"250px"}))):e.searchTrips?o.trips&&o.trips.length>0?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,m," trip",m>1&&"s"," found."),a.a.createElement("ul",null,d)):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"0 trip found."),a.a.createElement(c.b,{to:"/trips"},a.a.createElement(C,{formButton:"SEE ALL TRIPS"}))):d)},hn=function(e){return a.a.createElement(gn,Object.assign({allTrips:!0,title:"All Trips",userInSession:e.userInSession},e))},xn=function(e){return a.a.createElement(gn,Object.assign({searchTrips:!0,userInSession:e.userInSession},e))},bn=t(51),En=function(e){var n=e.component,t=e.userInSession,r=Object(bn.a)(e,["component","userInSession"]);return a.a.createElement(u.b,Object.assign({},r,{render:function(e){return t?a.a.createElement(n,Object.assign({},e,{userInSession:t},r)):a.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))};function vn(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 20px;\n"]);return vn=function(){return e},e}var wn=I.a.div(vn()),yn=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),In=function(e){throw e},On=function(e){return yn.post("/newStep",e).then((function(e){return e.data})).catch(In)},jn=function(e){return yn.get("/steps/".concat(e)).then((function(e){return e.data})).catch(In)},Sn=function(e){return yn.get("/stepDetails/".concat(e)).then((function(e){return e.data})).catch(In)},Tn=function(e,n){return yn.put("/steps/".concat(e),n).then((function(e){return e.data})).catch(In)},kn=function(e){return yn.delete("/steps/".concat(e)).then((function(e){return e.data})).catch(In)},Un=p.a.create({baseURL:"".concat("https://supertrips.herokuapp.com","/api"),withCredentials:!0}),Pn=function(e){throw e},_n=function(e){return Un.post("/newExperience",e).then((function(e){return e.data})).catch(Pn)},Cn=function(e){return Un.get("/experiences/".concat(e)).then((function(e){return e.data})).catch(Pn)},Fn=function(e){return Un.get("/experiences/trip/".concat(e)).then((function(e){return e.data})).catch(Pn)},Dn=function(e){return Un.get("/experienceDetails/".concat(e)).then((function(e){return e.data})).catch(Pn)},An=function(e,n){return Un.put("/experiences/".concat(e),n).then((function(e){return e.data})).catch(Pn)},Ln=function(e){return Un.delete("/experiences/".concat(e)).then((function(e){return e.data})).catch(Pn)},Mn=function(e,n){return Un.put("/experiences/addPicture/".concat(e),n).then((function(e){return e.data})).catch(Pn)},Rn=function(e,n){return Un.delete("/experiences/".concat(e,"/deletePicture/").concat(n)).then((function(e){return e.data})).catch(Pn)};function zn(){var e=Object(y.a)(["\n  margin: 40px;\n"]);return zn=function(){return e},e}function Bn(){var e=Object(y.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, 0.2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return Bn=function(){return e},e}function Nn(){var e=Object(y.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return Nn=function(){return e},e}var Hn=I.a.div(Nn()),Gn=I.a.p(Bn()),Wn=I.a.div(zn()),qn=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useState)(""),f=Object(l.a)(m,2),g=f[0],x=f[1],b=Object(r.useState)(""),v=Object(l.a)(b,2),w=v[0],y=v[1],I=function(){d(!p)};Object(r.useEffect)((function(){var n=e.match.params;(e.tripForm?X(n.id):e.stepForm?Sn(n.stepId):e.experienceForm?Dn(n.experienceId):h()).then((function(n){e.tripForm?o(Object(B.a)(Object(B.a)({},n),{},{imageUrl:"",originalImg:n.imageUrl})):e.profilePictureForm?o({profilePicture:"",originalImg:n.profilePicture}):o(n)})).catch((function(){return console.log("Error while getting ".concat(e.formType," details"))}))}),[e.formType,e.stepForm,e.tripForm,e.experienceForm,e.profilePictureForm,e.match]);return a.a.createElement(Hn,null,w?a.a.createElement(Wn,null,a.a.createElement(L,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(tn,{formTitle:e.formTitle,formSubmit:function(n){var t=e.match.params;y(!0);var r=new FormData;e.tripForm&&(r.append("title",n.title),n.archive?r.append("imageUrl",n.archive):r.append("imageUrl",n.originalImg),r.append("isPublic",n.isPublic),r.append("startDate",n.startDate),r.append("endDate",n.endDate)),e.profilePictureForm&&(n.archive?r.append("profilePicture",n.archive):r.append("profilePicture",n.originalImg)),(e.tripForm?Z(t.id,r):e.stepForm?Tn(t.stepId,n):e.experienceForm?An(t.experienceId,n):E(e.user._id,r)).then((function(n){y(!1),e.profilePictureForm?e.updateProfilePicture():e.history.push({pathname:"/trips/".concat(t.id)})})).catch((function(n){y(!1),console.log("Error while editing ".concat(e.formType)),x(n.response.data.message)}))},formState:i,formInputs:e.formInputs,formButton:"SAVE"}),a.a.createElement(a.a.Fragment,null,a.a.createElement(C,{toggleDeleteConfirmation:I,formButton:"DELETE",theme:"lightcoral",color:"white"}),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Are you sure you want to delete this ",e.formType," ? "),a.a.createElement(C,{deleteItem:function(){var n=e.match.params,t=e.tripForm?$(n.id):e.stepForm?kn(n.stepId):e.experienceForm?Ln(n.experienceId):E(e.user._id,{profilePicture:"https://res.cloudinary.com/nutriapp/image/upload/v1599217287/profileDefault_jr9j16.png"}),r=e.tripForm?"/trips":e.profilePictureForm?"/profile":"/trips/".concat(n.id);t.then((function(n){e.profilePictureForm&&e.updateProfilePicture(),e.history.push(r)})).catch((function(){return console.log("Error while deleting ".concat(e.formType))}))},closeDeleteConfirmation:function(){d(!1)},formButton:"YES",theme:"lightcoral",color:"white"}),a.a.createElement(C,{toggleDeleteConfirmation:I,formButton:"CANCEL",theme:"lightgrey",color:"black"})),e.profilePictureForm||a.a.createElement(a.a.Fragment,null,g&&a.a.createElement(Gn,null,g),a.a.createElement("p",null,a.a.createElement(c.b,{to:"/trips/".concat(e.match.params.id)},a.a.createElement(L,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))))},Yn=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){h().then((function(e){o(e)})).catch((function(){return console.log("Error while getting user details")}))}),[]);return a.a.createElement(qn,Object.assign({profilePictureForm:!0,formType:"profile picture",formInputs:[{type:"file",value:"",name:"profilePicture"}],formTitle:"Edit Profile Picture",updateProfilePicture:e.updateProfilePicture,user:i},e))},Jn=function(e){var n=Object(r.useState)({loggedInUser:e.userInSession}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(!1),s=Object(l.a)(u,2),p=s[0],d=s[1],m=Object(r.useCallback)((function(){return h().then((function(e){d(!1),o({loggedInUser:e})})).catch((function(){return console.log("Error updating profile picture")}))}),[]);return a.a.createElement(wn,null,a.a.createElement("h1",null,"Welcome to your profile, ",e.userInSession.username," !"),a.a.createElement(je,{src:i.loggedInUser.profilePicture,width:"150px",height:"150px",margin:"0 auto 20px"}),p&&a.a.createElement(Yn,Object.assign({updateProfilePicture:m},e)),a.a.createElement(C,{formButton:p?"CLOSE":"EDIT PICTURE",toggleProfilePictureForm:function(){d(!p)}}),a.a.createElement(c.b,{to:"/profile/my-trips"},a.a.createElement(C,{formButton:"MY TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/profile/favorite-trips"},a.a.createElement(C,{formButton:"FAVORITE TRIPS",width:"250px"})),a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement(C,{formButton:"CREATE A NEW TRIP",width:"250px"})))};function Kn(){var e=Object(y.a)(["\n  list-style: none;\n  background-color: rgba(0, 0, 0, 0.1);\n  width: 300px;\n  border-radius: 10px;\n  margin: 10px auto;\n\n  span {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n\n    a {\n      margin-right: 5px;\n    }\n  }\n\n  p {\n    font-weight: 300;\n    font-style: italic;\n    padding: 10px;\n  }\n"]);return Kn=function(){return e},e}function Vn(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n\n  &:hover {\n    cursor: pointer;\n    color: lightgrey;\n  }\n"]);return Vn=function(){return e},e}function Xn(){var e=Object(y.a)(["\n  width: 100%;\n  max-width: 600px;\n"]);return Xn=function(){return e},e}function Zn(){var e=Object(y.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, 0.2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 50px auto;\n  }\n"]);return Zn=function(){return e},e}function $n(){var e=Object(y.a)(["\n  margin: 20px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return $n=function(){return e},e}function Qn(){var e=Object(y.a)(["\n  margin: 0 auto;\n  width: 100%;\n"]);return Qn=function(){return e},e}function et(){var e=Object(y.a)(["\n  margin: 20px auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return et=function(){return e},e}function nt(){var e=Object(y.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return nt=function(){return e},e}function tt(){var e=Object(y.a)(["\n  margin: 20px auto;\n"]);return tt=function(){return e},e}function rt(){var e=Object(y.a)(["\n  a {\n    text-decoration: none;\n  }\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n\n  span {\n    h1 {\n      display: inline-block;\n    }\n\n    svg {\n      margin-left: 20px;\n      padding-bottom: 2px;\n    }\n  }\n"]);return rt=function(){return e},e}var at=I.a.div(rt()),it=I.a.div(tt()),ot=I.a.p(nt()),ct=I.a.ul(et()),lt=I.a.div(Qn()),ut=I.a.li($n()),st=I.a.p(Zn()),pt=I.a.img(Xn()),dt=I.a.span(Vn()),mt=I.a.li(Kn());function ft(){var e=Object(y.a)(["\n  :hover {\n    color: lightgrey;\n  }\n"]);return ft=function(){return e},e}function gt(){var e=Object(y.a)(["\n  width: 90vw;\n"]);return gt=function(){return e},e}function ht(){var e=Object(y.a)(["\n  position: relative;\n  text-align: center;\n\n  img {\n    height: 200px;\n    width: auto;\n    margin: 20px;\n\n    @media (max-width: 767px) {\n      height: 100px;\n      width: auto;\n      margin: 10px;\n      object-fit: scale-down;\n    }\n\n    @media (min-width: 992px) {\n      height: 300px;\n      width: auto;\n      margin: 20px;\n    }\n  }\n\n  svg {\n    position: absolute;\n    top: 10%;\n    left: 10%;\n    background-color: rgba(255, 255, 255, 0.4);\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-radius: 25%;\n    padding: 3px;\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n"]);return ht=function(){return e},e}function xt(){var e=Object(y.a)(["\n  text-align: center;\n  margin-top: 20px;\n"]);return xt=function(){return e},e}function bt(){var e=Object(y.a)(["\n  display: flex;\n  justify-content: center;\n"]);return bt=function(){return e},e}function Et(){var e=Object(y.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: lightgrey;\n  }\n"]);return Et=function(){return e},e}function vt(){var e=Object(y.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n\n  &:hover {\n    cursor: pointer;\n    color: lightgrey;\n  }\n"]);return vt=function(){return e},e}function wt(){var e=Object(y.a)(["\n  margin: 20px;\n  margin-left: 50px;\n"]);return wt=function(){return e},e}function yt(){var e=Object(y.a)(["\n  margin: 15px 5px 5px 40px;\n  display: block;\n  opacity: ",";\n"]);return yt=function(){return e},e}function It(){var e=Object(y.a)(["\n  margin: 10px;\n  text-align: left;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return It=function(){return e},e}function Ot(){var e=Object(y.a)(["\n  margin: 0 auto;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(y.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return jt=function(){return e},e}function St(){var e=Object(y.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return St=function(){return e},e}function Tt(){var e=Object(y.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return Tt=function(){return e},e}function kt(){var e=Object(y.a)(["\n  @keyframes slide-up {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n\n  animation: slide-up 0.65s ease-in-out forwards;\n"]);return kt=function(){return e},e}var Ut=I.a.div(kt()),Pt=I.a.p(Tt()),_t=I.a.div(St()),Ct=(I.a.ul(jt()),I.a.div(Ot()),I.a.li(It()),I.a.span(yt(),(function(e){return e.opacity}))),Ft=I.a.p(wt()),Dt=I.a.span(vt()),At=I.a.span(Et()),Lt=I.a.div(bt()),Mt=I.a.div(xt()),Rt=I.a.div(ht()),zt=I.a.div(gt()),Bt=I.a.span(ft());function Nt(){var e=Object(y.a)(["\n  margin: 40px;\n"]);return Nt=function(){return e},e}function Ht(){var e=Object(y.a)(["\n  color: red;\n  border: solid red 1px;\n  border-radius: 4px;\n  max-width: 350px;\n  padding: 5px 5px 8px;\n  margin: 0 auto;\n  background-color: rgba(241, 169, 160, 0.2);\n\n  @media (min-width: 768px) {\n    width: 350px;\n    margin: 0 auto;\n  }\n"]);return Ht=function(){return e},e}function Gt(){var e=Object(y.a)(["\n  a {\n    text-decoration: none;\n  }\n"]);return Gt=function(){return e},e}var Wt=I.a.div(Gt()),qt=I.a.p(Ht()),Yt=I.a.div(Nt()),Jt=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)(""),s=Object(l.a)(u,2),p=s[0],d=s[1],m="/create-trip"===e.match.path?"/trips":"/trips/".concat(e.match.params.id);return a.a.createElement(Wt,null,p?a.a.createElement(Yt,null,a.a.createElement(L,{chosenIcon:"faSpinner",size:"2x"}),a.a.createElement("p",null,"Loading")):a.a.createElement(tn,{formType:e.formType,formTitle:e.addPhotoToExperience||"Create a new ".concat(e.formType),formSubmit:function(n){d(!0);var t=new FormData;e.tripForm&&(t.append("title",n.title),t.append("imageUrl",n.archive),t.append("isPublic",n.isPublic),t.append("startDate",n.startDate),t.append("endDate",n.endDate)),e.addPhotoToExperience&&t.append("imageUrl",n.archive),(e.tripForm?J(t):e.stepForm?On(n):e.experienceForm?_n(n):Mn(e.experienceId,t)).then((function(n){d(!1),e.addPhotoToExperience&&e.closeShowAddPhoto(),e.addPhotoToExperience&&e.updateNewPicture(),e.tripForm?e.history.push("/trips"):e.history.push("/trips/".concat(e.tripId))})).catch((function(n){d(!1),console.log("Error while getting ".concat(e.formType," details")),o(n.response.data.message)}))},formState:e.initialState,formInputs:e.formInputs,formButton:e.addPhotoToExperience?"ADD":"CREATE"}),i&&a.a.createElement(qt,null,i),e.addPhotoToExperience||a.a.createElement("p",null,a.a.createElement(c.b,{to:"".concat(m)},a.a.createElement(L,{chosenIcon:"faArrowCircleLeft",size:"2x"}))))},Kt=function(e){return a.a.createElement(Jt,Object.assign({addPhotoToExperience:!0,formType:"experience photo",formInputs:[{label:"New photo (max. 10 Mo)",type:"file",name:"imageUrl"}],initialState:{imageUrl:"",archive:null},tripId:e.match.params.id,experienceId:e.experienceId,closeShowAddPhoto:e.closeShowAddPhoto,handleUpdateNewPicture:e.updateNewPicture},e))},Vt=function(e){var n=Object(r.useState)({loggedInUser:null,experience:[],expanded:!1,showAddPhoto:!1,editingPhotos:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1],u=function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{editingPhotos:!1})}))},s=function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{showAddPhoto:!1})}))},p=Object(r.useCallback)((function(){return Dn(i.experience._id).then((function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{experience:e})}))})).catch((function(){return console.log("Error while getting experience details")}))}),[i.experience._id]),d=function(e){Rn(i.experience._id,e).then((function(e){p()}))},m=i.experience.pictures&&i.experience.pictures.map((function(n,t){return a.a.createElement(Rt,{key:t,style:{display:"inline-block"}},a.a.createElement("img",{key:n._id,src:n.url,alt:"experience"}),e.author._id===i.loggedInUser._id&&i.editingPhotos&&a.a.createElement(L,{chosenIcon:"faTrashAlt",color:"red",deleteExperiencePicture:d,picture:n}))}));return Object(r.useEffect)((function(){Dn(e.experience._id).then((function(n){o((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,experience:n})}))})).catch((function(){return console.log("Error while getting experience details")}))}),[e.userInSession,e.experience._id]),a.a.createElement(Ut,null,a.a.createElement(_t,{onClick:function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(L,{chosenIcon:"faChevronDown"}):a.a.createElement(L,{chosenIcon:"faChevronRight"}),a.a.createElement("span",null,a.a.createElement(Bt,null,i.experience.title),i.experience.date&&a.a.createElement(a.a.Fragment,null,(i.experience.showDate||e.author._id===i.loggedInUser._id)&&a.a.createElement(Ct,{opacity:i.experience.showDate?"1":"0.4"},a.a.createElement(L,{chosenIcon:"faCalendarAlt",color:"grey"}),i.experience.date,!i.experience.showDate&&" (Hidden for other users)"),(i.experience.showTime||e.author._id===i.loggedInUser._id)&&a.a.createElement(Ct,{opacity:i.experience.showTime?"1":"0.4"},a.a.createElement(L,{chosenIcon:"faClock",color:"grey"}),i.experience.time,!i.experience.showTime&&" (Hidden for other users)")))),i.expanded&&a.a.createElement(zt,null,i.experience.description&&a.a.createElement(Ft,null,a.a.createElement(L,{chosenIcon:"faCommentDots",color:"grey"}),i.experience.description),i.experience.place&&a.a.createElement(Lt,null,a.a.createElement(nn,{experienceMap:!0,address:i.experience.place.address,lat:i.experience.place.lat,lng:i.experience.place.lng,zoom:"15"})),i.experience.pictures&&a.a.createElement(Mt,null,m),i.loggedInUser&&e.author._id===i.loggedInUser._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(At,{onClick:function(){!i.editingPhotos&&s(),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{editingPhotos:!e.editingPhotos})}))}},a.a.createElement(L,{chosenIcon:i.editingPhotos?"faMinusSquare":"faPenSquare",color:"dimgrey"}),i.editingPhotos?"Close":"Edit photos"),a.a.createElement(Dt,{onClick:function(){!i.showAddPhoto&&u(),o((function(e){return Object(B.a)(Object(B.a)({},e),{},{showAddPhoto:!e.showAddPhoto})}))}},a.a.createElement(L,{chosenIcon:i.showAddPhoto?"faMinusSquare":"faPlusSquare",color:"dimgrey"}),i.showAddPhoto?"Close":"Add a photo")),i.showAddPhoto&&a.a.createElement(Kt,Object.assign({experienceId:i.experience._id,closeShowAddPhoto:s,updateNewPicture:p},e)),i.loggedInUser&&i.loggedInUser._id===e.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Pt,null,a.a.createElement(c.b,{to:"/trips/".concat(i.experience.step.trip,"/steps/").concat(i.experience.step._id,"/edit-experience/").concat(i.experience._id)},a.a.createElement(L,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit experience"))))))};function Xt(){var e=Object(y.a)(["\n  :hover {\n    color: lightgrey;\n  }\n"]);return Xt=function(){return e},e}function Zt(){var e=Object(y.a)(["\n  margin: 20px auto;\n  text-align: left;\n  display: flex;\n  align-items: center;\n\n  svg {\n    margin: 0 10px;\n    padding-top: 4px;\n  }\n"]);return Zt=function(){return e},e}function $t(){var e=Object(y.a)(["\n  margin: 0 auto;\n"]);return $t=function(){return e},e}function Qt(){var e=Object(y.a)(["\n  margin: 0 auto;\n  padding: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Qt=function(){return e},e}function er(){var e=Object(y.a)(["\n  &:hover {\n    cursor: pointer;\n  }\n"]);return er=function(){return e},e}function nr(){var e=Object(y.a)(["\n  svg {\n    margin: 0 10px;\n  }\n"]);return nr=function(){return e},e}function tr(){var e=Object(y.a)(["\n  @keyframes slide-left {\n    0% {\n      transform: translateX(calc(100% - 5px));\n      opacity: 0;\n    }\n    100% {\n      transform: translateX(0);\n      opacity: 1;\n    }\n  }\n\n  animation: slide-left 0.65s ease-in-out forwards;\n"]);return tr=function(){return e},e}var rr=I.a.div(tr()),ar=I.a.p(nr()),ir=I.a.div(er()),or=I.a.ul(Qt()),cr=I.a.div($t()),lr=I.a.li(Zt()),ur=I.a.span(Xt()),sr=function(e){var n=Object(r.useState)({loggedInUser:null,step:[],experiences:[],author:[],expanded:!1}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){Sn(e.step._id).then((function(n){o((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,step:n})})),Cn(e.step._id).then((function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{experiences:e})}))})).catch((function(){return console.log("Error while getting experiences")})),X(e.step.trip._id).then((function(e){o((function(n){return Object(B.a)(Object(B.a)({},n),{},{author:e.author})}))}))})).catch((function(){return console.log("Error while getting step details")}))}),[e.userInSession,e.step.trip._id,e.step._id]);var u=i.experiences.map((function(n,t){return a.a.createElement(lr,{key:n._id},a.a.createElement(Vt,Object.assign({experience:n,experienceNumber:t+1,author:i.author,userInSession:i.loggedInUser},e)))}));return a.a.createElement(rr,null,a.a.createElement(ir,{onClick:function(){o((function(e){return Object(B.a)(Object(B.a)({},e),{},{expanded:!e.expanded})}))}},i.expanded?a.a.createElement(L,{chosenIcon:"faChevronCircleDown"}):a.a.createElement(L,{chosenIcon:"faChevronCircleRight"}),a.a.createElement(ur,null,i.step.title)),i.expanded&&a.a.createElement(a.a.Fragment,null,a.a.createElement(or,null,a.a.createElement(cr,null,u)),i.loggedInUser&&i.loggedInUser._id===i.step.trip.author&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ar,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(i.step.trip._id,"/steps/").concat(i.step._id,"/add-experience"),state:{trip:i.trip}}},a.a.createElement(L,{chosenIcon:"faAsterisk"}),a.a.createElement("span",null,"Add an experience"))),a.a.createElement(ar,null,a.a.createElement(c.b,{to:"/trips/".concat(i.step.trip._id,"/edit-step/").concat(i.step._id)},a.a.createElement(L,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit step"))))))},pr=function(e){return a.a.createElement(tn,{comment:!0,formSubmit:function(n){var t=e.match.params;ee(t.id,n).then((function(){e.closeLeavingComment(),e.updateTrips()})).catch((function(){return console.log("Error while leaving a comment")}))},formState:{comment:""},formInputs:[{type:"textarea",name:"comment",placeholder:"Type here .."}],formButton:"POST"})},dr=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),i=t[0],o=t[1],u=Object(r.useState)({loggedInUser:null,trip:[],steps:[],experiences:[],leavingComment:!1,lat:null,lng:null}),s=Object(l.a)(u,2),p=s[0],d=s[1],m=function(){X(e.match.params.id).then((function(n){null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,trip:n})}))})).catch((function(e){console.log("Error while getting trip details"),o("Error : ".concat(e.response.data.message))}))};Object(r.useEffect)((function(){Fn(e.match.params.id).then((function(e){var n=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lat}),0).toFixed(2)/e.filter((function(e){return e.place})).length,t=e.filter((function(e){return e.place})).reduce((function(e,n){return e+n.place.lng}),0).toFixed(2)/e.filter((function(e){return e.place})).length;d((function(r){return Object(B.a)(Object(B.a)({},r),{},{experiences:e,lat:n,lng:t})}))})).catch((function(){return console.log("Error while getting experiences")})),X(e.match.params.id).then((function(n){null===n?o("Sorry, this trip doesn't exist."):d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,trip:n})})),jn(e.match.params.id).then((function(n){d((function(t){return Object(B.a)(Object(B.a)({},t),{},{loggedInUser:e.userInSession,steps:n})}))})).catch((function(){return console.log("Error while getting steps")}))})).catch((function(e){console.log("Error while getting trip details"),o("Error : ".concat(e.response.data.message))}))}),[e.userInSession,e.match.params.id]);var f=p.steps.map((function(n,t){return a.a.createElement(ut,{key:n._id},a.a.createElement(sr,Object.assign({step:n,stepNumber:t+1,author:p.trip.author,userInSession:p.loggedInUser},e)))})),g=p.experiences.filter((function(e){return e.place})).map((function(e){return{lat:e.place.lat,lng:e.place.lng}})),h=p.trip.comments&&p.trip.comments.map((function(n){return a.a.createElement(mt,{key:n._id},a.a.createElement("span",null,a.a.createElement(je,{src:n.commentAuthor.profilePicture,width:"20px",height:"20px",margin:"5px 10px 5px 0",display:"inline-block"}),a.a.createElement(c.b,{to:e.userInSession&&e.userInSession._id===n.commentAuthor._id?"/profile":"/profile/user/".concat(n.commentAuthor._id)},n.commentAuthor.username)," ","said"),a.a.createElement("p",null,n.comment))}));return a.a.createElement(at,null,i?a.a.createElement(st,null,i):p.trip&&p.trip.isPublic||p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",null,a.a.createElement("h1",null,p.trip.title),p.loggedInUser&&a.a.createElement(ke,{trip:p.trip,userInSession:p.loggedInUser,updateUser:e.updateUser})),a.a.createElement(it,null,a.a.createElement(L,{chosenIcon:"faHourglassHalf",size:"1x"}),a.a.createElement("span",null,p.trip.duration," days")),p.trip&&a.a.createElement("div",{style:{marginTop:"15px"}},a.a.createElement(_e,{trip:p.trip,userInSession:p.loggedInUser,updateTrips:m}),a.a.createElement("span",null,p.trip.likes.length)),p.trip.author&&a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"5px auto 20px"}},a.a.createElement(je,{src:p.trip.author.profilePicture,width:"50px",height:"50px",margin:"5px 15px 5px 0",display:"inline-block"}),a.a.createElement("span",null,"By"," ",a.a.createElement(c.b,{to:e.userInSession&&e.userInSession._id===p.trip.author._id?"/profile":"/profile/user/".concat(p.trip.author._id)},p.trip.author.username))),p.trip&&p.loggedInUser&&p.trip.author._id===p.loggedInUser._id&&!p.trip.isPublic&&a.a.createElement("p",{style:{opacity:"0.4"}},"(PRIVATE TRIP)"),p.experiences&&p.experiences.filter((function(e){return e.place})).length>=1?a.a.createElement(nn,{tripMap:!0,mapType:"tripPresentation",address:"",lat:1===p.experiences.length?p.experiences[0].place.lat:p.lat,lng:1===p.experiences.length?p.experiences[0].place.lng:p.lng,zoom:"14",allExperiencesCoords:g,hasOnlyOneLocalisation:1===g.length}):a.a.createElement(pt,{src:p.trip.imageUrl,alt:"trip cover pic"}),p.steps&&a.a.createElement(ct,null,a.a.createElement(lt,null,f)),p.trip&&p.trip.comments&&p.trip.comments.length>0&&a.a.createElement("div",null,a.a.createElement("p",null,"Comments"),h),p.loggedInUser&&a.a.createElement(a.a.Fragment,null,a.a.createElement(dt,{onClick:function(){d((function(e){return Object(B.a)(Object(B.a)({},e),{},{leavingComment:!e.leavingComment})}))}},a.a.createElement(L,{chosenIcon:p.leavingComment?"faMinusSquare":"faCommentAlt",color:"dimgrey"}),p.leavingComment?"Close":"Leave a comment"),p.leavingComment&&a.a.createElement(pr,Object.assign({},e,{closeLeavingComment:function(){d((function(e){return Object(B.a)(Object(B.a)({},e),{},{leavingComment:!1})}))},updateTrips:m}))),p.loggedInUser&&p.loggedInUser._id===p.trip.author._id&&a.a.createElement(a.a.Fragment,null,a.a.createElement(ot,null,a.a.createElement(c.b,{to:{pathname:"/trips/".concat(p.trip._id,"/add-step"),state:{trip:p.trip}}},a.a.createElement(L,{chosenIcon:"faPlus"}),a.a.createElement("span",null,"Add a step"))),a.a.createElement(ot,null,a.a.createElement(c.b,{to:{pathname:"/trips/edit/".concat(p.trip._id),state:{trip:p.trip}}},a.a.createElement(L,{chosenIcon:"faFeatherAlt"}),a.a.createElement("span",null,"Edit trip")))),a.a.createElement("p",{style:{marginTop:"40px"}},a.a.createElement(c.b,{to:"/trips"},a.a.createElement(L,{chosenIcon:"faArrowCircleLeft",size:"2x"})))):"Sorry, this is a private trip.")},mr=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){X(e.match.params.id).then((function(e){o(e)})).catch((function(){return console.log("Error while getting trip details :")}))}),[e.match.params.id]);var c=function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")},u=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"},{label:"Do you want to make it public ?",type:"checkbox",value:i.isPublic,checked:i.isPublic,name:"isPublic"},{label:"Image",type:"file",value:"",name:"imageUrl"},{label:"Start date*",type:"date",value:c(i.startDate),name:"startDate"},{label:"End date*",type:"date",value:c(i.endDate),name:"endDate"}];return a.a.createElement(qn,Object.assign({tripForm:!0,formType:"trip",formInputs:u,formTitle:'Edit "'.concat(i.title,'"'),trip:i},e))},fr=function(e){var n={title:"",trip:e.match.params.id};return a.a.createElement(Jt,Object.assign({stepForm:!0,formType:"step",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "First day - London South and East"'}],initialState:n,tripId:e.match.params.id},e))},gr=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){Sn(e.match.params.stepId).then((function(e){o(e)})).catch((function(){return console.log("Error while getting step details")}))}),[e.match.params.stepId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: My magical trip to Paris"}];return a.a.createElement(qn,Object.assign({stepForm:!0,formType:"step",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),step:i},e))},hr=function(e){var n={title:"",date:"",time:"",showDate:!1,showTime:!1,step:e.match.params.stepId,trip:e.match.params.id,description:"",place:null};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Jt,Object.assign({experienceForm:!0,formType:"experience",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:'Ex.: "Dinner in Camden Town"'},{label:"Date*",type:"date",name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",name:"showDate"},{label:"Time*",type:"time",name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",name:"showTime"},{label:"Description",type:"textarea",name:"description",placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",placeholder:'Ex: "Paris..."'}],initialState:n,tripId:e.match.params.id},e)))},xr=function(e){var n=Object(r.useState)({}),t=Object(l.a)(n,2),i=t[0],o=t[1];Object(r.useEffect)((function(){Dn(e.match.params.experienceId).then((function(e){o(e)})).catch((function(){return console.log("Error while getting experience details")}))}),[e.match.params.experienceId]);var c=[{label:"Title*",type:"text",name:"title",value:i.title,placeholder:"Ex.: Dinner at the Eiffel Tower"},{label:"Date*",type:"date",value:function(e){var n=new Date(e),t=""+(n.getMonth()+1),r=""+n.getDate(),a=n.getFullYear();return t.length<2&&(t="0"+t),r.length<2&&(r="0"+r),[a,t,r].join("-")}(i.date),name:"date"},{label:"Make date public ? (Hidden by default)",type:"checkbox",value:i.showDate,checked:i.showDate,name:"showDate"},{label:"Time*",type:"time",value:i.time,name:"time"},{label:"Make time public ? (Hidden by default)",type:"checkbox",value:i.showTime,checked:i.showTime,name:"showTime"},{label:"Description",type:"textarea",name:"description",value:i.description,placeholder:'Ex.: "This restaurant was absolutely incredible !"'},{label:"Find the place",type:"text",name:"place",value:i.place,placeholder:'Ex: "Paris..."'}];return a.a.createElement(qn,Object.assign({experienceForm:!0,formType:"experience",formInputs:c,formTitle:'Edit "'.concat(i.title,'"'),experience:i},e))};function br(){var e=Object(y.a)(["\n  @media (max-width: 768px) {\n    padding-bottom: 60px;\n  }\n"]);return br=function(){return e},e}function Er(){var e=Object(y.a)(['\n  margin: 0;\n  text-align: center;\n  font-family: "Roboto", "Arial", "Helvetica", sans-serif;\n  color: darkslategray;\n\n  a {\n    color: darkslategray;\n\n    &:hover {\n      color: lightgrey;\n    }\n  }\n']);return Er=function(){return e},e}var vr=I.a.div(Er()),wr=I.a.div(br()),yr=function(e){return a.a.createElement(Jt,Object.assign({tripForm:!0,formType:"trip",formInputs:[{label:"Title*",type:"text",name:"title",placeholder:"Ex.: My magical trip to Paris"},{label:"Image",type:"file",name:"imageUrl"},{label:"Do you want to make it public ?",type:"checkbox",name:"isPublic"},{label:"Start Date*",type:"date",name:"startDate"},{label:"End Date*",type:"date",name:"endDate"}],initialState:{title:"",isPublic:!1,startDate:"",endDate:"",imageUrl:"",archive:null}},e))},Ir=function(e){return a.a.createElement(gn,Object.assign({myTrips:!0,title:"My Trips",userInSession:e.userInSession},e))},Or=function(e){return a.a.createElement(gn,Object.assign({myFavoriteTrips:!0,title:"My Favorite Trips",userInSession:e.userInSession},e))},jr=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Error 404 not found"))};function Sr(){var e=Object(y.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 0 20px;\n\n  ul {\n    padding: 0;\n  }\n"]);return Sr=function(){return e},e}var Tr=I.a.div(Sr()),kr=function(e){var n=Object(r.useState)(null),t=Object(l.a)(n,2),i=t[0],o=t[1],c=Object(r.useState)([]),u=Object(l.a)(c,2),s=u[0],p=u[1];Object(r.useEffect)((function(){(function(){var n=Object(N.a)(z.a.mark((function n(){return z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f(e.match.params.userId).then((function(e){o({profileUser:e}),K().then((function(n){var t=n.filter((function(n){return n.isPublic&&n.author._id===e._id}));p(t)}))}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}),[e.match.params.userId]);var d=a.a.createElement(Ce,{trips:s,userInSession:e.userInSession,updateUser:e.updateUser,updateTrips:function(){(function(){var e=Object(N.a)(z.a.mark((function e(){var n,t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t=n.filter((function(e){return e.isPublic&&e.author._id===i.profileUser._id})),p(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}});return a.a.createElement(Tr,null,i&&a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,i.profileUser.username),a.a.createElement(je,{src:i.profileUser.profilePicture,width:"150px",height:"150px",margin:"0 auto 20px"}),i&&s&&a.a.createElement("ul",null,a.a.createElement("h2",null,i.profileUser.username,"'s trips :"),d)))};function Ur(){var e=Object(y.a)(["\n  background-color: white;\n  width: 100%;\n  height: 60px;\n  position: fixed;\n  bottom: 0px;\n\n  @media (min-width: 768px) {\n    display: none;\n  }\n\n  ul {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    list-style: none;\n    border-top: 1px solid lightgrey;\n    margin: 0 30px;\n    padding: 0;\n    align-items: center;\n    height: 100%;\n    justify-content: space-around;\n\n    a {\n      display: flex;\n      flex-direction: column;\n      text-decoration: none;\n\n      img {\n        align-self: center;\n        height: 25px;\n        width: 25px;\n        margin-bottom: 5px;\n        border-radius: 50%;\n      }\n    }\n  }\n"]);return Ur=function(){return e},e}var Pr=I.a.div(Ur()),_r=function(e){return a.a.createElement(Pr,null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/trips"},a.a.createElement("img",{src:"/travel_icon_3.png",alt:"Trip icon"}),"Trips")),a.a.createElement("li",null,e.userInSession?a.a.createElement(c.b,{to:"/profile"},a.a.createElement("img",{src:e.userInSession.profilePicture,alt:"Profile icon"}),"Profile"):a.a.createElement(c.b,{to:"/login"},a.a.createElement("img",{src:"/profile_icon.png",alt:"Login icon"}),"Login")),e.userInSession&&a.a.createElement("li",null,a.a.createElement(c.b,{to:"/create-trip"},a.a.createElement("img",{src:"/add_icon.png",alt:"Profile icon"}),"New"))))},Cr=function(){var e={loggedInUser:JSON.parse(localStorage.getItem("loggedInUser"))||null},n=Object(r.useState)(e),t=Object(l.a)(n,2),i=t[0],o=t[1],c=function(e){o({loggedInUser:e})};Object(r.useEffect)((function(){null===i.loggedInUser&&h().then((function(e){localStorage.setItem("loggedInUser",JSON.stringify(e)),o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))}),[i.loggedInUser]);var s=function(){h().then((function(e){o({loggedInUser:e})})).catch((function(e){o({loggedInUser:!1})}))};return a.a.createElement(vr,null,a.a.createElement(M,{userInSession:i.loggedInUser,getUser:c}),a.a.createElement(wr,null,a.a.createElement(u.d,null,a.a.createElement(u.b,{exact:!0,path:"/",render:function(e){return a.a.createElement(Fe,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/trips",render:function(e){return a.a.createElement(hn,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/search",render:function(e){return a.a.createElement(xn,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(u.b,{exact:!0,path:"/trips/:id",render:function(e){return a.a.createElement(dr,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(En,{exact:!0,path:"/trips/edit/:id",userInSession:i.loggedInUser,component:mr}),a.a.createElement(En,{exact:!0,path:"/trips/:id/add-step",userInSession:i.loggedInUser,component:fr}),a.a.createElement(En,{exact:!0,path:"/trips/:id/edit-step/:stepId",userInSession:i.loggedInUser,component:gr}),a.a.createElement(En,{exact:!0,path:"/trips/:id/steps/:stepId/add-experience",userInSession:i.loggedInUser,component:hr}),a.a.createElement(En,{exact:!0,path:"/trips/:id/steps/:stepId/edit-experience/:experienceId",userInSession:i.loggedInUser,component:xr}),a.a.createElement(u.b,{exact:!0,path:"/signup",render:function(e){return a.a.createElement(pn,Object.assign({},e,{getUser:c}))}}),a.a.createElement(u.b,{exact:!0,path:"/login",render:function(e){return a.a.createElement(dn,Object.assign({},e,{getUser:c}))}}),a.a.createElement(En,{exact:!0,path:"/profile",userInSession:i.loggedInUser,component:Jn}),a.a.createElement(En,{exact:!0,path:"/profile/my-trips",userInSession:i.loggedInUser,component:Ir,updateUser:s}),a.a.createElement(u.b,{exact:!0,path:"/profile/user/:userId",render:function(e){return a.a.createElement(kr,Object.assign({},e,{userInSession:i.loggedInUser,updateUser:s}))}}),a.a.createElement(En,{exact:!0,path:"/profile/favorite-trips",userInSession:i.loggedInUser,component:Or,updateUser:s}),a.a.createElement(En,{exact:!0,path:"/create-trip",userInSession:i.loggedInUser,component:yr}),a.a.createElement(u.b,{component:jr}))),a.a.createElement(_r,{userInSession:i.loggedInUser}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(c.a,null,a.a.createElement(a.a.StrictMode,null,a.a.createElement(Cr,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.a68bc7d9.chunk.js.map